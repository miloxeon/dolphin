{"version":3,"sources":["webpack:///webpack/bootstrap c7614beb81646f5f285f","webpack:///./stagezero/tools.js","webpack:///./stagezero/base.js","webpack:///./stagezero/elements/geometry.js","webpack:///./stagezero/elements/index.js","webpack:///./stagezero/elements/style.js","webpack:///./stagezero/elements/text.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;AChEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,kCAAkC,cAAc;;AAEhD,iCAAiC;AACjC;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;AClBA;;AAEoB;;AAEpB;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;;;;;;;;;;ACxCA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC/CA;;AAEA;;AAEA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGgB;AACY;AACiB;AAC7B;;;AAGhB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA,sCAAsC;AACtC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACrKA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEmB;;AAEnB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC9GA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,6B;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c7614beb81646f5f285f","'use strict';\r\n\r\n// set of handy pure functions\r\n\r\nexport function getHash(object_type) {\r\n\treturn object_type.toString() + '_' + Math.floor(Math.random() * new Date()).toString();\r\n}\r\n\r\nexport function fillObject(object, defaults) {\r\n\tvar new_object = Object.assign({}, object || {});\r\n\r\n\tfor (var param in defaults || {}) {\r\n\t\tif (!new_object[param]) {\r\n\t\t\tnew_object[param] = defaults[param];\r\n\t\t}\r\n\t}\r\n\r\n\treturn new_object;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./stagezero/tools.js\n// module id = 0\n// module chunks = 0","'use strict';\r\n\r\nimport {drawElement} from './elements';\r\n\r\nvar stage = SVG('diagram');\r\nvar layer = stage.group();\r\n\r\nlayer = drawElement(layer, {\r\n\tposition: {\r\n\t\tx: 150,\r\n\t\ty: 200\r\n\t},\r\n\ttext: 'Hello'\r\n});\r\n\r\n\r\nlayer = drawElement(layer, {\r\n\tposition: {\r\n\t\tx: 300,\r\n\t\ty: 200\r\n\t},\r\n\ttext: 'Harder, Ivan',\r\n\tstyle: {\r\n\t\tbackground_color: 'pink'\r\n\t}\r\n});\r\n\r\nlayer = drawElement(layer, {\r\n\tposition: {\r\n\t\tx: 300,\r\n\t\ty: 300\r\n\t},\r\n\ttext: 'Harder, Ivan',\r\n\tstyle: {\r\n\t\tbackground_color: 'pink'\r\n\t}\r\n});\r\n\r\nconsole.log(layer.elements);\r\n\r\n// console.log('it works!');\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./stagezero/base.js\n// module id = 1\n// module chunks = 0","'use strict';\r\n\r\n// methods for computing element's geometry\r\n\r\nexport function computeRectSize(rendered_label, style) {\r\n\treturn {\r\n\t\tw: rendered_label.bbox().w + \r\n\t\t\tstyle.additional_style.text_offset.x * 2 +\r\n\t\t\tstyle.rect_style['stroke-width'],\r\n\r\n\t\th: rendered_label.bbox().h + \r\n\t\t\tstyle.additional_style.text_offset.y * 2 + \r\n\t\t\tstyle.rect_style['stroke-width'] \r\n\t}\r\n}\r\n\r\nexport function computeTextPosition(rendered_label, style) {\r\n\r\n\tvar text_offset = style.additional_style.text_offset;\r\n\tvar stroke_offset = style.rect_style['stroke-width'] / 2;\r\n\r\n\treturn {\r\n\t\tx: text_offset.x + stroke_offset + \r\n\t\t\tcomputeAnchorOffset(rendered_label, style.text_style.anchor),\r\n\r\n\t\ty: text_offset.y + stroke_offset\r\n\t}\r\n}\r\n\r\nfunction computeAnchorOffset(rendered_label, anchor) {\r\n\tswitch (anchor) {\r\n\t\tcase 'start':\r\n\t\t\treturn 0;\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'middle':\r\n\t\t\treturn rendered_label.bbox().w / 2;\r\n\t\t\tbreak;\r\n\r\n\t\tcase 'end':\r\n\t\t\treturn rendered_label.bbox().w;\r\n\t\t\tbreak;\r\n\r\n\t\tdefault:\r\n\t\t\t// error\r\n\t\t\tbreak;\r\n\t}\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./stagezero/elements/geometry.js\n// module id = 2\n// module chunks = 0","'use strict';\r\n\r\n// everything needed to work with elements\r\n\r\n//\telement_type:\r\n//\t\ttype: object of { type: 'simple' } by default, needs for Dolphin to be extendable\r\n//\t\r\n//\telement_blueprint:\r\n//\t\tid\r\n//\t\tposition: {x, y}\r\n//\t\ttype: element_type\r\n//\t\ttext: element text as a single line\r\n//\t\tstyle: element_style (just like default_element_style but you may omit unused field like you are in CSS)\r\n//\r\n//\t\r\n//\taddress:\r\n//\t\trendered_element,\r\n//\t\tsocket\r\n//\t\r\n//\trendered_element:\r\n//\t\tid\r\n//\t\trepresentation: actual element on the layer\r\n//\t\ttester\r\n//\t\tsocket: function to get socket's coordinates by its number\r\n//\r\n//\tsockets: TODO\r\n//\ttester: TODO\r\n\r\n\r\n// \telement_style = {\r\n// \t\tpadding: [15, 10],\r\n//\r\n// \t\tborder_color: 'black',\r\n// \t\tborder_width: 2,\r\n// \t\tborder_radius: 4,\r\n//\r\n// \t\tcolor: 'black',\r\n// \t\tfont_family: 'Arial',\r\n// \t\tfont_size: 14,\r\n// \t\tline_height: 1.25,\r\n// \t\tfont_style: 'normal',\r\n// \t\tfont_weight: 'normal',\r\n// \t\ttext_align: 'left',\r\n//\r\n// \t\tbackground_color: 'white'\r\n// \t}\r\n\r\n\r\nimport {fitText} from './text';\r\nimport {convertElementStyle} from './style';\r\nimport {computeRectSize, computeTextPosition} from './geometry';\r\nimport {getHash} from '../tools';\r\n\r\n\r\nexport function drawElement(layer, element_blueprint) {\r\n\tvar new_layer = layer.clone();\r\n\r\n\tvar element = new_layer.group();\r\n\tvar style = convertElementStyle(element_blueprint.style);\r\n\r\n\tvar element_text = element.text(\r\n\t\t\tfitText(element_blueprint.text)\r\n\t\t)\r\n\t\t.font(style.text_style);\r\n\r\n\tvar rect_size = computeRectSize(element_text, style);\r\n\tvar element_rect = element.rect(rect_size.w, rect_size.h)\r\n\t\t.attr(style.rect_style);\r\n\r\n\tvar text_position = computeTextPosition(element_text, style);\r\n\telement_text.move(text_position.x, text_position.y);\r\n\telement_text.front();\r\n\r\n\telement.move(element_blueprint.position.x, element_blueprint.position.y);\r\n\r\n\telement.attr({\r\n\t\tid: getHash('element')\r\n\t})\r\n\r\n\telement.data({\r\n\t\tblueprint: element_blueprint//,\r\n\t\t// tester: generateTestMethods(element_rect, new_layer),\r\n\t\t// sockets: generateSockets(element, new_layer)\r\n\t});\r\n\r\n\tvar element_with_id = {};\r\n\telement_with_id[getHash('element')] = element;\r\n\r\n\tnew_layer.elements = Object.assign({}, \r\n\t\tlayer.elements,\r\n\t\telement_with_id\r\n\t);\r\n\r\n\treturn new_layer;\r\n}\r\n\r\nfunction generateSockets(rendered_element) {\r\n\tvar tester = _generateTestMethods(rendered_element)();\r\n\r\n\t// var colors = [\r\n\t// \t'red',\r\n\t// \t'green',\r\n\t// \t'blue',\r\n\t// \t'black',\r\n\t// \t'orange',\r\n\t// \t'purple',\r\n\t// \t'grey',\r\n\t// \t'hotpink'\r\n\t// ];\r\n\r\n\tvar colors = [\r\n\t\t'transparent',\r\n\t\t'transparent',\r\n\t\t'transparent',\r\n\t\t'transparent',\r\n\t\t'transparent',\r\n\t\t'transparent',\r\n\t\t'transparent',\r\n\t\t'transparent'\r\n\t];\r\n\r\n\tvar sockets = [\r\n\t\t_generateSocket(rendered_element, 0, \t\t\t0, colors[0]),\t// socket 1: top left\r\n\t\t_generateSocket(rendered_element, tester.w / 2, 0, colors[1]),\t// socket 2: top center\r\n\t\t_generateSocket(rendered_element, tester.w, \t0, colors[2]),\t// socket 3: top right\r\n\r\n\t\t_generateSocket(rendered_element, 0, \t\t\ttester.h / 2, colors[3]),\t// socket 4: middle left\r\n\t\t_generateSocket(rendered_element, tester.w, \ttester.h / 2, colors[4]),\t// socket 5: middle right\r\n\r\n\t\t_generateSocket(rendered_element, 0, \t\t\ttester.h, colors[5]),\t// socket 6: bottom left\r\n\t\t_generateSocket(rendered_element, tester.w / 2, tester.h, colors[6]),\t// socket 7: bottom center\r\n\t\t_generateSocket(rendered_element, tester.w, \ttester.h, colors[7])\t// socket 8: bottom right\r\n\t]\r\n\r\n\treturn function (number) {\r\n\t\treturn [sockets[number - 1]().cx, sockets[number - 1]().cy];\r\n\t}\r\n}\r\n\r\nfunction _generateSocket(rendered_element, cx, cy, color) {\r\n\tvar socket = rendered_element.circle(5).center(cx, cy).fill(color);\r\n\tvar tester = _generateTestMethods(socket);\r\n\r\n\treturn tester;\r\n}\r\n\r\nfunction _generateTestMethods(rendered_element) {\r\n\treturn function () {\r\n\t\tvar rbox = rendered_element.rbox();\r\n\t\tvar diagram_rbox = diagram.rbox();\r\n\r\n\t\tvar x = rbox.x - diagram_rbox.x;\r\n\t\tvar y = rbox.y - diagram_rbox.y;\r\n\r\n\t\treturn {\r\n\t\t\t'x': x,\r\n\t\t\t'y': y,\r\n\t\t\t'x2': x + rbox.w,\r\n\t\t\t'y2': y + rbox.h,\r\n\t\t\t'cx': x + rbox.w / 2,\r\n\t\t\t'cy': y + rbox.h / 2,\r\n\t\t\t'w': rbox.w,\r\n\t\t\t'h': rbox.h\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./stagezero/elements/index.js\n// module id = 3\n// module chunks = 0","'use strict';\r\n\r\n// convert CSS-like style to SVG-like:\r\n\r\n// this:\r\n// \t{\r\n// \t\tpadding\r\n// \t\tborder_color\r\n// \t\tborder_width\r\n// \t\tborder_radius\r\n//\t\r\n// \t\tcolor\r\n// \t\tfont_family\r\n// \t\tfont_size\r\n// \t\tline_height\r\n// \t\tfont_style\r\n// \t\tfont_weight\r\n// \t\ttext_align\r\n//\r\n// \t\tbackground_color\r\n// \t}\r\n//\r\n//\tto this:\r\n//\t{\r\n//\t\trect_style: {\r\n//\t\t\tfill\r\n//\t\t\tstroke\r\n//\t\t\tstroke-width\r\n//\t\t\trx\r\n//\t\t\try\r\n//\t\t},\r\n//\t\ttext_style: {\r\n//\t\t\tleading\r\n//\t\t\tfamily\r\n//\t\t\tsize\r\n//\t\t\tstyle\r\n//\t\t\tweight\r\n//\t\t\tfill\r\n//\t\t\tanchor\r\n//\t\t},\r\n//\t\tadditional_style: {\r\n//\t\t\thorizontal_text_offset,\r\n//\t\t\tvertical_text_offset\r\n//\t\t}\r\n//\t}\r\n\r\nimport {fillObject} from '../tools';\r\n\r\nexport function convertElementStyle(element_style) {\r\n\tvar default_element_style = {\r\n\t\tpadding: [15, 10],\r\n\r\n\t\tborder_color: 'black',\r\n\t\tborder_width: 2,\r\n\t\tborder_radius: 4,\r\n\t\t\r\n\t\tcolor: 'black',\r\n\t\tfont_family: 'Arial',\r\n\t\tfont_size: 14,\r\n\t\tline_height: 1.25,\r\n\t\tfont_style: 'normal',\r\n\t\tfont_weight: 'normal',\r\n\t\ttext_align: 'left',\r\n\r\n\t\tbackground_color: 'white'\r\n\t};\r\n\r\n\tvar passed_style = fillObject(element_style, default_element_style);\r\n\r\n\tvar rect_style = {\r\n\t\t'fill': passed_style.background_color,\r\n\t\t'stroke': passed_style.border_color,\r\n\t\t'stroke-width': passed_style.border_width,\r\n\t\t'rx': passed_style.border_radius,\r\n\t\t'ry': passed_style.border_radius\r\n\t}\r\n\r\n\tvar text_style = {\r\n\t\t'leading': passed_style.line_height,\r\n\t\t'family': passed_style.font_family,\r\n\t\t'size': passed_style.font_size,\r\n\t\t'style': passed_style.font_style,\r\n\t\t'weight': passed_style.font_weight,\r\n\t\t'fill': passed_style.color,\r\n\t\t'anchor': (function () {\r\n\t\t\tvar text_align = passed_style.text_align;\r\n\t\t\tif (text_align == 'left') {\r\n\t\t\t\treturn 'start';\r\n\t\t\t} else if (text_align == 'center') {\r\n\t\t\t\treturn 'middle';\r\n\t\t\t} else if (text_align == 'right') {\r\n\t\t\t\treturn 'end';\r\n\t\t\t} else {\r\n\t\t\t\t// error\r\n\t\t\t}\r\n\t\t})()\r\n\t}\r\n\r\n\tvar additional_style = {\r\n\t\ttext_offset: {\r\n\t\t\tx: passed_style.padding[1],\r\n\t\t\ty: passed_style.padding[0]\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\trect_style: rect_style,\r\n\t\ttext_style: text_style,\r\n\t\tadditional_style: additional_style\r\n\t}\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./stagezero/elements/style.js\n// module id = 4\n// module chunks = 0","'use strict';\r\n\r\n// element text processing methods\r\n\r\nexport function fitText(text, max_length) {\r\n\r\n\t// split text to lines because SVG doesn't support HTML-like line wrap\r\n\r\n\tvar max_word_length = max_length || 20;\r\n\r\n\tvar words = text.split(' ');\t\r\n\r\n\tvar lines = [];\r\n\tvar line = '';\r\n\r\n\twords.forEach(function (word) {\r\n\t\tif (line.length + word.length >= getLongestWordLength(words, max_word_length)) {\r\n\t\t\tlines.push(line);\r\n\t\t\tline = '';\r\n\t\t}\r\n\t\tline += word + ' ';\r\n\t});\r\n\r\n\tif (line) {\r\n\t\tlines.push(line);\r\n\t}\r\n\r\n\tlines = lines.map(function (line) {\r\n\t\treturn line.slice(0, -1) + '\\n';\r\n\t});\r\n\r\n\treturn lines.join('');\r\n}\r\n\r\nfunction getLongestWordLength(words, max_word_length) {\r\n\tvar real_max_word_length = words.concat().sort(function (a, b) {\r\n\t\treturn b.length - a.length;\r\n\t})[0].length;\r\n\r\n\treturn Math.max(real_max_word_length, max_word_length);\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./stagezero/elements/text.js\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}