var dolphin=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=9)}([function(t,e,n){"use strict";function i(t){return JSON.parse(JSON.stringify(t))}function r(t){return Math.floor(Math.random()*new Date).toString()}function s(t,e){return t.toString()+"_"+e}function o(t){return parseInt(t.split("_")[1])}function a(t){return parseInt(element_id.split("_")[0])}Object.defineProperty(e,"__esModule",{value:!0}),e.clone=i,e.getHash=r,e.getId=s,e.getRawId=o,e.getTypeById=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={"padding-w":"11","padding-h":"11","offset-upper":"-5","offset-lower":"15","default-connection-type":"association-bidi","line-min-length":"50"}},function(t,e,n){"use strict";function i(t){if(!t.from.id||!t.to.id||!t.id)return new TypeError("Blueprint error: some of id's are missing")}function r(t){if(!t)return new TypeError("Element error: element is missing")}function s(t){if(!t.x||!t.y)return new TypeError("Position error: coordinates are missing")}function o(t){if(!t)return new TypeError("Position error: bbox is missing or can't be computed")}function a(t){if(!t)throw new Error("Function error: line function is missing")}function h(t){if(!t.element||!t.socket)return new TypeError("Position error: address element or socket are missing")}function u(t,e){if(!t||!e)return new Error("Coordinates error: start point or end point or both are missing")}function l(t){if(!t)throw new TypeError("Connection type is missing, default type load failed")}function c(t){if(!t)throw new Error("Internal error: Connection line is missing")}function f(t){if(!t||!t[0]||!t[1]||t.length>2)throw new Error("Wrong sockets: "+t)}Object.defineProperty(e,"__esModule",{value:!0}),e.checkBlueprint=i,e.checkElement=r,e.checkPos=s,e.checkBbox=o,e.checkLineFunction=a,e.checkAddress=h,e.checkCoordinates=u,e.checkType=l,e.checkLine=c,e.checkSockets=f},function(t,e,n){"use strict";function i(){return this.x()+this.getRect().width()}function r(){return this.y()+this.getRect().height()}function s(t){var e=t.getNameLabel(),n=t.getTypeLabel(),i=t.getAttributesLabel(),r=t.getMethodsLabel(),s={w:parseInt(a.default["padding-w"]),h:parseInt(a.default["padding-h"])},o=s,h=Math.max(e?e.bbox().w:0,n?n.bbox().w:0,i?i.bbox().w:0,r?r.bbox().w:0)+2*o.w,u=(e?e.bbox().h:0)+(n?n.bbox().h:0)+(i?i.bbox().h:0)+(r?r.bbox().h:0)+2*o.h;return i&&(u+=s.h),r&&(u+=s.h),{w:h,h:u}}Object.defineProperty(e,"__esModule",{value:!0}),e.x2=i,e.y2=r,e.computeRectSize=s;var o=n(1),a=function(t){return t&&t.__esModule?t:{default:t}}(o)},function(t,e,n){"use strict";function i(t){return!!t&&"object"==typeof t}function r(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"!==e&&"[object Date]"!==e}function s(t){return Array.isArray(t)?[]:{}}function o(t,e){return e&&!0===e.clone&&l(t)?u(s(t),t,e):t}function a(t,e,n){var i=t.slice();return e.forEach(function(e,r){void 0===i[r]?i[r]=o(e,n):l(e)?i[r]=u(t[r],e,n):-1===t.indexOf(e)&&i.push(o(e,n))}),i}function h(t,e,n){var i={};return l(t)&&Object.keys(t).forEach(function(e){i[e]=o(t[e],n)}),Object.keys(e).forEach(function(r){l(e[r])&&t[r]?i[r]=u(t[r],e[r],n):i[r]=o(e[r],n)}),i}function u(t,e,n){var i=Array.isArray(e),r=Array.isArray(t),s=n||{arrayMerge:a};if(i===r)return i?(s.arrayMerge||a)(t,e,n):h(t,e,n);return o(e,n)}var l=function(t){return i(t)&&r(t)};u.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce(function(t,n){return u(t,n,e)})};var c=u;t.exports=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=[{id:1,position:{x:300,y:100},text:{name:"Person",type:"interface",attributes:[{name:"name",type:"string",value:"Alex",scope:"public"},{name:"age",type:"int",value:"100"},{name:"wife",scope:"protected",type:"any"}],methods:[{name:"helloWorld",type:"int"},{name:"foo",type:"string",args:[{name:"name",type:"string",value:"Alex"},{name:"age",type:"int",value:"100"},{name:"wife",type:"any"},{name:"wife",type:"any"}]}]}},{id:2,position:{x:600,y:300},text:{name:"Creature",attributes:[{name:"name",type:"string"}]}}],r=[{id:1,type:"inheritance",from:{id:1,role:"foo",indicator:"2"},to:{id:2,role:"bar",indicator:"1..*"},text:"inherits"}];e.model={elements:i,connections:r}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.draw=void 0;var r=n(0),s=n(22),o=i(s),a=n(12),h=i(a),u=n(18),l=i(u),c=n(31);n(30);c.ClassDiagram=c.invent({create:"g",inherit:c.G,extend:l.default,construct:{classDiagram:function(t){return this.put(new c.ClassDiagram).addClass("dolphin_diagram dolphin_diagram-class").setId((0,r.getHash)()).move(0,0)}}}),c.ClassDiagramNode=c.invent({create:"g",inherit:c.G,extend:o.default,construct:{classDiagramNode:function(t){return this.put(new c.ClassDiagramNode).applyBlueprint(t).addClass("dolphin_node").draggy()}}}),c.Connection=c.invent({create:"g",inherit:c.G,extend:h.default,construct:{connection:function(t){return this.put(new c.Connection).applyBlueprint(t).addClass("dolphin-connection")}}});e.draw=c("diagram")},function(t,e,n){"use strict";function i(t){this.state=t||{},this.getState=r,this.setState=s,this.subscribe=o,this.__onUpdate__=[]}function r(){return this.state}function s(t){this.state=t,this.__onUpdate__.forEach(function(e){e(t)})}function o(t){this.__onUpdate__.push(t),t(this.state)}Object.defineProperty(e,"__esModule",{value:!0}),e.Store=i},function(t,e,n){var i=n(26);"string"==typeof i&&(i=[[t.i,i,""]]);var r={};r.transform=void 0;n(28)(i,r);i.locals&&(t.exports=i.locals)},function(t,e,n){"use strict";function i(t){t.children().forEach(function(e){e.on("dragmove",function(){t.fire("redraw")}),e.on("dragend",function(){t.fire("rebuild",{node:this})})})}function r(t){l.clear(),l.fromModel(t),i(l)}function s(t,e){var n=(0,h.clone)(t),i=(0,h.getRawId)(e.attr("id")),r={x:e.x(),y:e.y()};return n.elements.forEach(function(t){t.id===i&&(t.position=r)}),n}var o=n(5),a=n(6),h=n(0),u=n(7);n(8);var l=a.draw.classDiagram(),c=(0,h.clone)(o.model),f=new u.Store(c);f.subscribe(r),l.on("redraw",l.redrawConnections),l.on("rebuild",function(t){var e=s(f.getState(),t.detail.node);f.setState(e)}),t.exports={store:f}},function(t,e,n){"use strict";function i(t){return this.blueprint=r(t),this.setId((0,s.getHash)()),this.setRichText({text:t.text,from:{role:t.from.role,indicator:t.from.indicator},to:{role:t.to.role,indicator:t.to.indicator}}),this.redraw(),this}function r(t){if((0,a.checkBlueprint)(t))throw(0,a.checkBlueprint)(t);var e=t,n=h(o.default_blueprint,t);return-1===o.allowed_types.indexOf(e.type)&&(n.type="association-bidi"),n}Object.defineProperty(e,"__esModule",{value:!0}),e.applyBlueprint=i;var s=n(0),o=n(15),a=n(2),h=n(4)},function(t,e,n){"use strict";function i(t,e){if((0,u.checkElement)(t))throw(0,u.checkElement)(t);if((0,u.checkElement)(e))throw(0,u.checkElement)(e);var n=(s(t),s(e));return r(t,{x:n.x,y:n.y})||r(t,{x:n.x2,y:n.y})||r(t,{x:n.x,y:n.y2})||r(t,{x:n.x2,y:n.y2})||r(t,{x:n.cx,y:n.cy})}function r(t,e){if((0,u.checkElement)(t))throw(0,u.checkElement)(t);if((0,u.checkPos)(e))throw(0,u.checkPos)(e);var n=e.x,i=e.y,r=s(t);return n>r.x&&n<r.x2&&i>r.y&&i<r.y2}function s(t){if((0,u.checkElement)(t))throw(0,u.checkElement)(t);return{x:t.x(),y:t.y(),cx:t.cx(),cy:t.cy(),x2:t.x()+Math.abs(2*(t.x()-t.cx())),y2:t.y()+Math.abs(2*(t.y()-t.cy())),w:Math.abs(2*(t.x()-t.cx())),h:Math.abs(2*(t.y()-t.cy()))}}function o(t,e){var n=a(t,e),i={1:"24",2:"54",3:"54",4:"74",5:"75",6:"45",7:"45",8:"25",12:"24",23:"54",34:"74",45:"72",56:"75",67:"45",78:"25",18:"27",123:"54",234:"54",345:"72",456:"72",567:"45",678:"45",178:"27",128:"27",1234:"54",2345:"72",3456:"72",4567:"75",5678:"45",1678:"25",1278:"27",1238:"24"};return i[n]?i[n].split("").map(function(t){return parseInt(t)}):null}function a(t,e){if((0,u.checkElement)(t))throw(0,u.checkElement)(t);if((0,u.checkElement)(e))throw(0,u.checkElement)(e);var n=s(t),i=s(e),r=(i.x,n.x,i.y,n.y,[]);i.x,n.cx,i.y,n.cy;r.push(h(n,{x:i.x,y:i.y})),r.push(h(n,{x:i.x2,y:i.y})),r.push(h(n,{x:i.x,y:i.y2})),r.push(h(n,{x:i.x2,y:i.y2}));var o=[];return r.forEach(function(t){-1==o.indexOf(t)&&o.push(t)}),o.sort(function(t,e){return t-e}),o.join("")}function h(t,e){if((0,u.checkBbox)(t))throw(0,u.checkBbox)(t);if((0,u.checkPos)(e))throw(0,u.checkPos)(e);var n=e.x,i=e.y,r=Math.abs(t.cx-n),s=Math.abs(t.cy-i);return n>=t.cx?i<=t.cy?r>=s?2:1:r>=s?3:4:i<=t.cy?r>=s?7:8:r>=s?6:5}Object.defineProperty(e,"__esModule",{value:!0}),e.checkOverlap=i,e.checkIfInside=r,e.defineSockets=o;var u=n(2)},function(t,e,n){"use strict";function i(){return x}function r(t){return this.attr("id",(0,u.getId)(x,t))}function s(){return this.children().forEach(function(t){t.opacity(0)}),this}function o(){return this.children().forEach(function(t){t.opacity(1)}),this}function a(){var t=this.parent().getNodeById(this.blueprint.from.id),e=this.parent().getNodeById(this.blueprint.to.id);if((0,p.checkElement)(t))throw(0,p.checkElement)(t);if((0,p.checkElement)(e))throw(0,p.checkElement)(e);var n=(0,l.defineSockets)(t,e);if(n&&!(0,l.checkOverlap)(t,e)){this.showAll();var i={element:t,socket:n[0]},r={element:e,socket:n[1]},s=this.blueprint.type;if(s||(s=y.default["default-connection-type"]),(0,p.checkType)(s))throw(0,p.checkType)(s);var o=(0,h.getLineFunction)(n);if((0,p.checkLineFunction)(o))throw(0,p.checkLineFunction)(o);this.connectSockets(i,r,s,o)}else this.hideAll()}Object.defineProperty(e,"__esModule",{value:!0});var h=n(16),u=n(0),l=n(11),c=n(10),f=n(13),d=n(17),p=n(2),m=n(1),y=function(t){return t&&t.__esModule?t:{default:t}}(m),x="Connection";e.default={applyBlueprint:c.applyBlueprint,connectSockets:f.connectSockets,connectDots:f.connectDots,redraw:a,setId:r,setRichText:d.setRichText,displayLineText:d.displayLineText,getType:i,hideAll:s,showAll:o,blueprint:null,actionLabel:null,startRole:null,endRole:null,startIndicator:null,endIndicator:null}},function(t,e,n){"use strict";function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default["default-connection-type"],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:cubicTo;if((0,h.checkAddress)(t))throw(0,h.checkAddress)(t);if((0,h.checkAddress)(e))throw(0,h.checkAddress)(e);var r=t.element.socket(t.socket),s=e.element.socket(e.socket),a=r.x>s.x;return this.connectDots(r,s,n,i,a),this.displayLineText(a),(0,o.defineMarker)(n)(this.connectionLine,a),this}function r(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default["default-connection-type"],i=arguments[3],r=arguments[4];if((0,h.checkCoordinates)(t,e))throw(0,h.checkCoordinates)(t,e);if((0,h.checkLineFunction)(i))throw(0,h.checkLineFunction)(i);if(r){var o=[e,t];t=o[0],e=o[1]}if(this.connectionLine)this.connectionLine.plot(i(t,e));else{var u=(0,a.getRawId)(this.id());this.connectionLine=this.path(i(t,e)).attr("id",(0,a.getId)(u)).addClass(s(n))}return this}function s(){return"dolphin_line dolphin_line-"+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default["default-connection-type"])}Object.defineProperty(e,"__esModule",{value:!0}),e.connectSockets=i,e.connectDots=r;var o=n(14),a=n(0),h=n(2),u=n(1),l=function(t){return t&&t.__esModule?t:{default:t}}(u)},function(t,e,n){"use strict";function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.default["default-connection-type"];if((0,d.checkType)(t))throw(0,d.checkType)(t);switch(t){case"association":return r(o);case"association-bidi":return s;case"inheritance":case"implementation":return r(a);case"dependency":return r(o);case"aggregation":return function(t,e){return o(t,e),h(t,!e),t};case"composition":return function(t,e){return o(t,e),u(t,!e),t};default:throw new RangeError("Unknown connection type: "+t)}}function r(t){if((0,d.checkLineFunction)(t))throw(0,d.checkLineFunction)(t);return function(e,n){return t(e,n),s(e,!n),e}}function s(t,e){if((0,d.checkLine)(t))throw(0,d.checkLine)(t);t.marker(e?"start":"end",26,26,function(t){t.rect(24,24).center(13,13).fill("transparent")});return t}function o(t,e){if((0,d.checkLine)(t))throw(0,d.checkLine)(t);t.marker(e?"start":"end",26,26,function(t){t.path("M0,0 L4,2 L0,4").addClass("dolphin_line_marker dolphin_line_marker-arrow").attr("transform-origin","2 0").move(9,11).transform({rotation:l(e)})});return t}function a(t,e){if((0,d.checkLine)(t))throw(0,d.checkLine)(t);t.marker(e?"start":"end",26,26,function(t){t.path("M0,0 L4,2 L0,4 z").addClass("dolphin_line_marker dolphin_line_marker-arrow_filled").attr("transform-origin","2 0").move(9,11).transform({rotation:l(e)})});return t}function h(t,e){if((0,d.checkLine)(t))throw(0,d.checkLine)(t);t.marker(e?"start":"end",26,26,function(t){t.path("M0,0 L4,3 L0,6 L-4,3 z").addClass("dolphin_line_marker dolphin_line_marker-diamond").attr("transform-origin","0 0").move(9,10).transform({rotation:l(e)})});return t}function u(t,e){t.marker(e?"start":"end",26,26,function(t){t.path("M0,0 L4,3 L0,6 L-4,3 z").addClass("dolphin_line_marker dolphin_line_marker-diamond_filled").attr("transform-origin","0 0").move(9,10).transform({rotation:l(e)})});return t}function l(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?180:0}Object.defineProperty(e,"__esModule",{value:!0}),e.defineMarker=i;var c=n(1),f=function(t){return t&&t.__esModule?t:{default:t}}(c),d=n(2)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default_blueprint={id:1,type:"association-bidi",from:{id:1,role:"",indicator:""},to:{id:2,role:"",indicator:""},text:""},e.allowed_types=["association","association-bidi","inheritance","implementation","dependency","aggregation","composition"]},function(t,e,n){"use strict";function i(t){if((0,u.checkSockets)(t))throw(0,u.checkSockets)(t);switch([].concat(t).sort(function(t,e){return t-e}).join("")){case"47":case"24":return r;case"25":case"57":return s;case"27":return a;default:return o}}function r(t,e){if((0,u.checkCoordinates)(t,e))throw(0,u.checkCoordinates)(t,e);var n=(t.x,Math.abs(t.x-e.x),{x:t.x,y:e.y});return h(t,e,n,n)}function s(t,e){if((0,u.checkCoordinates)(t,e))throw(0,u.checkCoordinates)(t,e);var n=(t.x,Math.abs(t.x-e.x),{x:e.x,y:t.y});return h(t,e,n,n)}function o(t,e){if((0,u.checkCoordinates)(t,e))throw(0,u.checkCoordinates)(t,e);var n=t.x+Math.abs(t.x-e.x)/2;return h(t,e,{x:n,y:t.y},{x:n,y:e.y})}function a(t,e){if((0,u.checkCoordinates)(t,e))throw(0,u.checkCoordinates)(t,e);return"M "+t.x.toString()+" "+t.y.toString()+" L "+e.x.toString()+" "+e.y.toString()}function h(t,e,n,i){if((0,u.checkCoordinates)(t,e))throw(0,u.checkCoordinates)(t,e);return"M "+t.x.toString()+" "+t.y.toString()+" C "+n.x.toString()+" "+n.y.toString()+" "+i.x.toString()+" "+i.y.toString()+" "+e.x.toString()+" "+e.y.toString()}Object.defineProperty(e,"__esModule",{value:!0}),e.getLineFunction=i;var u=n(2)},function(t,e,n){"use strict";function i(t){return this.richText=t,this.redraw(),this}function r(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.connectionLine,n=this.richText,i=parseInt(l.default["offset-upper"]),r=parseInt(l.default["offset-lower"]);return e.length()>l.default["line-min-length"]?(this.showAll(),this.actionLabel?h(this.actionLabel,e,"middle",t):this.actionLabel=a(this,n.text,"dolphin_text dolphin_line_text dolphin_line_action",i,"middle"),this.startRole?h(this.startRole,e,"start",t):this.startRole=a(this,n.from.role,"dolphin_text dolphin_line_text dolphin_line_role",i,"start",t),this.startIndicator?h(this.startIndicator,e,"start",t):this.startIndicator=a(this,n.from.indicator,"dolphin_text dolphin_line_text dolphin_line_indicator",r,"start",t),this.endRole?h(this.endRole,e,"end",t):this.endRole=a(this,n.to.role,"dolphin_text dolphin_line_text dolphin_line_role",i,"end",t),this.endIndicator?h(this.endIndicator,e,"end",t):this.endIndicator=a(this,n.to.indicator,"dolphin_text dolphin_line_text dolphin_line_indicator",r,"end",t)):this.hideAll(),this}function s(t,e,n){var i=e.length();switch(n){case"start":return 10;case"middle":return"50%";case"end":return i-t-10}}function o(t,e){switch(t){case"start":return e?"end":"start";case"middle":return"middle";case"end":return e?"start":"end"}}function a(t,e,n,i,r,a){var h=void 0,u=t.text(function(t){var n=t.tspan(e).dy(i);h=n.bbox().w}).addClass(n);return u.path(t.connectionLine.array()).textPath().attr({startOffset:s(h,t.connectionLine,o(r,a)),spacing:"auto"}),u}function h(t,e,n,i){return t.textPath().attr("startOffset",s(t.bbox().w,e,o(n,i))),t.plot(e.array())}Object.defineProperty(e,"__esModule",{value:!0}),e.setRichText=i,e.displayLineText=r;var u=n(1),l=function(t){return t&&t.__esModule?t:{default:t}}(u)},function(t,e,n){"use strict";function i(){return l}function r(t){return this.attr({id:(0,u.getId)(l,t)})}function s(){return this.children().forEach(function(t){t.remove()}),this}function o(t){var e=this;return t.elements.forEach(function(t){e.classDiagramNode(t)}),t.connections.forEach(function(t){e.connection(t)}),this}function a(t){var e=void 0;return this.children().forEach(function(n){n.attr("id")===(0,u.getId)("ClassDiagramNode",t)&&(e=n)}),e}function h(){return this.children().forEach(function(t){"Connection"===t.getType()&&t.redraw()}),this}Object.defineProperty(e,"__esModule",{value:!0});var u=n(0),l="ClassDiagram";e.default={setId:r,clear:s,fromModel:o,getNodeById:a,getType:i,redrawConnections:h}},function(t,e,n){"use strict";function i(t){var e=r(t);return this.setId(e.id),this.blueprint=e,this.richText=e.text,this.reset(),this.move(e.position.x,e.position.y),this}function r(t){if(s(t)){var e=a(o.default_blueprint,t);return e.text.attributes=(e.text.attributes||[]).map(function(t){return a(o.default_attribute,t)}),e.text.methods=(e.text.methods||[]).map(function(t){return a(o.default_method,t)}),e.text.methods!==[]&&(e.text.methods=e.text.methods.map(function(t){return t.args!==[]&&(t.args=t.args.map(function(t){return a(o.default_argument,t)})),t})),e}}function s(t){if(t.position&&t.id)return!0;throw new TypeError("Blueprint error: id and/or coordinates are missing")}Object.defineProperty(e,"__esModule",{value:!0}),e.applyBlueprint=i;var o=n(23),a=n(4)},function(t,e,n){"use strict";function i(){var t=(0,s.getRawId)(this.attr("id")),e=this.getRect(),n=(0,r.computeRectSize)(this);return e?e.size(n.w,n.h):e=this.rect(n.w,n.h).move(0,0).attr("id",(0,s.getId)("rectangle",t)).addClass("dolphin_rect"),e.back(),this}Object.defineProperty(e,"__esModule",{value:!0}),e.drawBorder=i;var r=n(3),s=n(0)},function(t,e,n){"use strict";function i(){return h(this,"rectangle")}function r(){return h(this,"name-label")}function s(){return h(this,"type-label")}function o(){return h(this,"attributes-label")}function a(){return h(this,"methods-label")}function h(t,e){var n=u(t,e);if(1===n.length)return n[0];if(n.length>1)throw new RangeError("Parent "+t.attr("id").split("_")[0]+" has more than one "+e)}function u(t,e){var n=[];return t.children().forEach(function(t){t.attr("id").split("_")[0]===e&&n.push(t)}),n}Object.defineProperty(e,"__esModule",{value:!0}),e.getRect=i,e.getNameLabel=r,e.getTypeLabel=s,e.getAttributesLabel=o,e.getMethodsLabel=a},function(t,e,n){"use strict";function i(){return p}function r(t){return this.attr({id:(0,u.getId)("ClassDiagramNode",t)})}function s(){this.children().forEach(function(t){t.remove()})}function o(){return this.setRichText(),this.drawBorder(),this}Object.defineProperty(e,"__esModule",{value:!0});var a=n(25),h=n(19),u=n(0),l=n(3),c=n(24),f=n(20),d=n(21),p="DiagramNode";e.default={x2:l.x2,y2:l.y2,setRichText:a.setRichText,drawBorder:f.drawBorder,reset:o,applyBlueprint:h.applyBlueprint,socket:c.socket,setId:r,getRect:d.getRect,getNameLabel:d.getNameLabel,getTypeLabel:d.getTypeLabel,getAttributesLabel:d.getAttributesLabel,getMethodsLabel:d.getMethodsLabel,clear:s,getType:i,blueprint:null,style:null,richText:null}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default_blueprint={id:0,position:{x:0,y:0},text:{name:"NewClass",type:"normal",attributes:[],methods:[]}},e.default_attribute={name:"newElement",value:"",type:"any",scope:"public"},e.default_method={name:"newMethod",type:"any",scope:"public",args:[]},e.default_argument={name:"newArgument",type:"any",value:""}},function(t,e,n){"use strict";function i(t){switch(t){case 1:return{x:this.x(),y:this.y()};case 2:return{x:this.cx(),y:this.y()};case 3:return{x:this.x2(),y:this.y()};case 4:return{x:this.x(),y:this.cy()};case 5:return{x:this.x2(),y:this.cy()};case 6:return{x:this.x(),y:this.y2()};case 7:return{x:this.cx(),y:this.y2()};case 8:return{x:this.x2(),y:this.y2()};default:throw new RangeError("Wrong socket number (must be from 1 to 8)")}}Object.defineProperty(e,"__esModule",{value:!0}),e.socket=i},function(t,e,n){"use strict";function i(){var t=(0,l.getRawId)(this.attr("id")),e=this.richText;if(!e)throw new EvalError("Couldn't apply rich text: no rich text set");if(this.clear(),"normal"!==e.type)var n=this.text("<"+e.type+">").attr("id",(0,l.getId)("type-label",t)).addClass("dolphin_text dolphin_node_type");var i=this.text(e.name).attr("id",(0,l.getId)("name-label",t)).addClass("dolphin_text dolphin_node_name");if(e.attributes)var a=r(this,e.attributes).attr("id",(0,l.getId)("attributes-label",t)).addClass("dolphin_text");if(e.methods)var h=s(this,e.methods).attr("id",(0,l.getId)("methods-label",t)).addClass("dolphin_text");var u=o(this);return n&&n.move(u.type.x,u.type.y),i&&i.move(u.name.x,u.name.y),a&&a.move(u.attributes.x,u.attributes.y),h&&h.move(u.methods.x,u.methods.y),this}function r(t,e,n){return t.text(function(t){for(var n in e){var i=e[n],r=a(t);if(r(h(i.scope),"dolphin_node_scope",1).newLine(),r(i.name,"dolphin_node_attribute",1),"any"!==i.type&&(r(":","dolphin_node_symbol",2),r(u(i.type),"dolphin_node_datatype")),i.value)switch(r("=","dolphin_node_symbol",2),i.type){case"string":r('"'+i.value+'"',"dolphin_node_value dolphin_node_value-string");break;case"int":r(i.value,"dolphin_node_value dolphin_node_value-int");break;default:r(i.value,"dolphin_node_value")}}}).addClass("dolphin_text")}function s(t,e,n){return t.text(function(t){for(var n in e){var i=e[n],r=a(t);if(r(h(i.scope),"dolphin_node_scope",1).newLine(),"any"!==i.type&&r(u(i.type),"dolphin_node_datatype",1),r(i.name,"dolphin_node_method",1),i.args){t.tspan("(");for(var s in i.args){var o=i.args[s];if(r(o.name,"dolphin_node_passed dolphin_node_attribute").newLine().dx(20),"any"!==o.type&&(r(":","dolphin_node_passed dolphin_node_symbol",2),r(u(o.type),"dolphin_node_passed dolphin_node_datatype")),""!==o.value)switch(r("=","dolphin_node_passed dolphin_node_symbol",2),o.type){case"string":r('"'+o.value+'"',"dolphin_node_passed dolphin_node_value dolphin_node_value-string");break;case"int":r(o.value,"dolphin_node_passed dolphin_node_value dolphin_node_value-int");break;default:r(o.value,"dolphin_node_passed dolphin_node_value")}s<i.args.length-1?r(",","dolphin_node_passed"):r(")")}}else r("()")}}).addClass("dolphin_text")}function o(t){var e=t.getNameLabel(),n=t.getTypeLabel(),i=t.getAttributesLabel(),r=t.getMethodsLabel(),s=(0,c.computeRectSize)(t),o={},a={w:parseInt(d.default["padding-w"]),h:parseInt(d.default["padding-h"])},h=a,u=h.w,l=s.w/2,f=h.h;return n&&(o.type={x:l,y:f},f+=n.bbox().h),e&&(o.name={x:l,y:f},f+=e.bbox().h+a.h),i&&(o.attributes={x:u,y:f},f+=i.bbox().h+a.h),r&&(o.methods={x:u,y:f},f+=r.bbox().h+a.h),o}function a(t){return function(e,n,i){if(i){if(1===i){var r=t.tspan(e).addClass(n||"");return t.tspan(" "),r}if(2===i){t.tspan(" ");var s=t.tspan(e).addClass(n||"");return t.tspan(" "),s}throw new RangeError("Wrong spacing: "+i)}return t.tspan(e).addClass(n||"")}}function h(t){switch(t.toLowerCase()){case"public":return"+";case"private":return"-";case"protected":return"#";case"derived":return"/";case"package":return"~";default:throw new TypeError("Unknown scope: "+t)}}function u(t){return t.slice(0,1).toUpperCase()+t.slice(1).toLowerCase()}Object.defineProperty(e,"__esModule",{value:!0}),e.setRichText=i;var l=n(0),c=n(3),f=n(1),d=function(t){return t&&t.__esModule?t:{default:t}}(f)},function(t,e,n){e=t.exports=n(27)(void 0),e.push([t.i,".dolphin_diagram {\r\n\t/* Diagram */\r\n\tuser-select: none;\r\n}\r\n\r\n.dolphin_diagram-class {\r\n\t/* Class diagram */\r\n}\r\n\r\n.dolphin_node {\r\n\t/* Diagram node */\r\n\tcursor: pointer;\r\n\tshape-rendering: geometricPrecision;\r\n}\r\n\r\n.dolphin_rect {\r\n\t/* Node rectangle */\r\n\tfill: white;\r\n\tstroke: black;\r\n\tstroke-width: 2;\r\n\trx: 4;\r\n\try: 4;\r\n}\r\n\r\n/* TEXT */\r\n\r\n.dolphin_text {\r\n\t/* All of the node text */\r\n\tfill: black;\r\n\tfont-family: 'Verdana', sans-serif;\r\n\tfont-size: 12px;\r\n\tline-height: 1.25;\r\n\tfont-style: normal;\r\n\tfont-weight: normal;\r\n\ttext-rendering: optimizeLegibility;\r\n}\r\n\r\n.dolphin_node_type {\r\n\t/* Node type, for example: <interface> */\r\n\tfont-size: 10px;\r\n\tfont-style: italic;\r\n\ttext-anchor: middle;\r\n}\r\n\r\n.dolphin_node_name {\r\n\t/* Node name, for example: MyClass */\r\n\tfont-weight: bold;\r\n\ttext-anchor: middle;\r\n}\r\n\r\n.dolphin_node_scope {\r\n\t/* Node scope symbols: + - ~ and so on */\r\n\tfont-family: 'Courier New', monospace;\r\n\tfill: #B90690;\r\n}\r\n\r\n.dolphin_node_datatype {\r\n\t/* Datatype: String, Int and so on */\r\n\tfill: blue;\r\n\tfont-style: italic;\r\n}\r\n\r\n.dolphin_node_attribute {\r\n\t/* Node attribute name (variable name) */\r\n}\r\n\r\n.dolphin_node_symbol {\r\n\t/* Symbols in attribute and method name: =, : and so on */\r\n}\r\n\r\n.dolphin_node_value {\r\n\t/* Variable assigned value: i = 10 (10 is it) */\r\n\tfill: blue;\r\n}\r\n\r\n.dolphin_node_value-string {\r\n\t/* Separate style for string values like 'hello' */\r\n\tfill: #036A07;\r\n}\r\n\r\n.dolphin_node_value-int {\r\n\t/* Separate style for integers */\r\n}\r\n\r\n.dolphin_node_method {\r\n\t/* Method name */\r\n\tfill: #0000A2;\r\n}\r\n\r\n.dolphin_node_passed {\r\n\t/* Special style for passed parameters */\r\n}\r\n\r\n\r\n/* LINE */\r\n\r\n.dolphin_line {\r\n\t/* A line */\r\n\tfill: none;\r\n\tstroke: black;\r\n\tstroke-width: 1.5;\r\n\tstroke-linejoin: round;\r\n\tstroke-linecap: round;\r\n\tshape-rendering: geometricPrecision;\r\n}\r\n\r\n/* Different line styles */\r\n.dolphin_line-association {\r\n\tstroke-dasharray: none;\r\n}\r\n\r\n.dolphin_line-inheritance {\r\n\tstroke-dasharray: none;\t\r\n}\r\n\r\n.dolphin_line-implementation {\r\n\tstroke-dasharray: 5 5;\r\n}\r\n\r\n.dolphin_line-dependency {\r\n\tstroke-dasharray: 5 5;\r\n}\r\n\r\n.dolphin_line-aggregation {\r\n\tstroke-dasharray: none;\t\r\n}\r\n\r\n.dolphin_line-composition {\r\n\tstroke-dasharray: none;\t\r\n}\r\n\r\n.dolphin_line-dashed {\r\n\t/* Dashed line (implementation and dependency) */\r\n\tstroke-dasharray: 5 7;\r\n}\r\n\r\n.dolphin_line_text {\r\n\t/* All of the line text */\r\n\tletter-spacing: 1.2px;\r\n}\r\n\r\n.dolphin_line_indicator {\r\n\t/* Quantity indicator: 0..1, *, 5 and so on */\r\n\tfont-size: 9px;\r\n}\r\n\r\n.dolphin_line_indicator-from {\r\n\t/* Indicator near the 'from' class */\r\n}\r\n\r\n.dolphin_line_indicator-to {\r\n\t/* Indicator near the 'to' class */\r\n\ttext-anchor: end;\r\n}\r\n\r\n.dolphin_line_role {\r\n\t/* Class roles: extendedFoo, wrappedBar and so on. They are at the ends of the line */\r\n\t/*letter-spacing: initial;*/\r\n}\r\n\r\n.dolphin_line_role-from {\r\n\t/* Role near the 'from' class */\r\n}\r\n\r\n.dolphin_line_role-to {\r\n\t/* Role near the 'to' class */\r\n\ttext-anchor: end;\r\n}\r\n\r\n.dolphin_line_action {\r\n\t/* Text in the middle of the line */\r\n\ttext-anchor: middle;\r\n\tfont-family: 'Tahoma', sans-serif;\r\n\tfill: grey;\r\n\tfont-style: italic;\r\n}\r\n\r\n.dolphin_line_marker {\r\n\t/* Line arrows and diamonds */\r\n\tstroke: black;\r\n\tstroke-width: 1;\r\n\tstroke-linejoin: round;\r\n\tstroke-linecap: round;\r\n\tshape-rendering: geometricPrecision;\r\n}\r\n\r\n.dolphin_line_marker-arrow {\r\n\t/* > non-filled arrow */\r\n\tfill: none;\r\n}\r\n\r\n.dolphin_line_marker-arrow_filled {\r\n\t/* ► filled arrow */\r\n\tfill: white;\r\n}\r\n\r\n.dolphin_line_marker-diamond {\r\n\t/* <> non-filled diamond */\r\n\tfill: white;\r\n}\r\n\r\n.dolphin_line_marker-diamond_filled {\r\n\t/* ♦ filled diamond */\r\n\tfill: black;\r\n}\r\n",""])},function(t,e){function n(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var s=i(r);return[n].concat(r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"})).concat([s]).join("\n")}return[n].join("\n")}function i(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=n(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var s=this[r][0];"number"==typeof s&&(i[s]=!0)}for(r=0;r<t.length;r++){var o=t[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(t,e,n){function i(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=p[i.id];if(r){r.refs++;for(var s=0;s<r.parts.length;s++)r.parts[s](i.parts[s]);for(;s<i.parts.length;s++)r.parts.push(l(i.parts[s],e))}else{for(var o=[],s=0;s<i.parts.length;s++)o.push(l(i.parts[s],e));p[i.id]={id:i.id,refs:1,parts:o}}}}function r(t,e){for(var n=[],i={},r=0;r<t.length;r++){var s=t[r],o=e.base?s[0]+e.base:s[0],a=s[1],h=s[2],u=s[3],l={css:a,media:h,sourceMap:u};i[o]?i[o].parts.push(l):n.push(i[o]={id:o,parts:[l]})}return n}function s(t,e){var n=y(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=g[g.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),g.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function o(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=g.indexOf(t);e>=0&&g.splice(e,1)}function a(t){var e=document.createElement("style");return t.attrs.type="text/css",u(e,t.attrs),s(t,e),e}function h(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",u(e,t.attrs),s(t,e),e}function u(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function l(t,e){var n,i,r,s;if(e.transform&&t.css){if(!(s=e.transform(t.css)))return function(){};t.css=s}if(e.singleton){var u=v++;n=x||(x=a(e)),i=c.bind(null,n,u,!1),r=c.bind(null,n,u,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=h(e),i=d.bind(null,n,e),r=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(e),i=f.bind(null,n),r=function(){o(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}function c(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=b(e,r);else{var s=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(s,o[e]):t.appendChild(s)}}function f(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function d(t,e,n){var i=n.css,r=n.sourceMap,s=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||s)&&(i=w(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([i],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}var p={},m=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),y=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t.call(this,n)),e[n]}}(function(t){return document.querySelector(t)}),x=null,v=0,g=[],w=n(29);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},e.attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=m()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=r(t,e);return i(n,e),function(t){for(var s=[],o=0;o<n.length;o++){var a=n[o],h=p[a.id];h.refs--,s.push(h)}if(t){i(r(t,e),e)}for(var o=0;o<s.length;o++){var h=s[o];if(0===h.refs){for(var u=0;u<h.parts.length;u++)h.parts[u]();delete p[h.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(r))return t;var s;return s=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(s)+")"})}},function(t,e){(function(){SVG.extend(SVG.Element,{draggy:function(t){function e(t){if(!t||"function"!=typeof t.transform)return{x:1,y:1};var n=t.parent(),i=t.transform();r={};var r=e(n);return{x:i.scaleX*r.x,y:i.scaleY*r.y}}var n,i,r,s=this;return"function"==typeof this.fixed&&this.fixed(),t=t||{},n=function(t){var e=this.parent(SVG.Nested)||this.parent(SVG.Doc);t=t||window.event,s.beforedrag&&s.beforedrag(t);var n=s.bbox();s instanceof SVG.G?(n.x=s.x(),n.y=s.y()):s instanceof SVG.Nested&&(n={x:s.x(),y:s.y(),width:s.width(),height:s.height()}),s.startEvent=t,s.startPosition={x:n.x,y:n.y,width:n.width,height:n.height,zoom:e.viewbox().zoom,rotation:s.transform("rotation")*Math.PI/180},SVG.on(window,"mousemove",i),SVG.on(window,"touchmove",i),SVG.on(window,"mouseup",r),SVG.on(window,"touchend",r),s.node.dispatchEvent(new CustomEvent("dragstart",{detail:{event:t,delta:{x:0,y:0}}})),t.preventDefault?t.preventDefault():t.returnValue=!1},i=function(n){if(n=n||window.event,s.startEvent){var i,r,o=s.startPosition.rotation,a=s.startPosition.width,h=s.startPosition.height,u=s.startPosition.zoom,l={x:n.pageX-s.startEvent.pageX,y:n.pageY-s.startEvent.pageY};if(/^touchstart|touchmove$/.test(n.type)?(l.x=n.touches[0].pageX-s.startEvent.touches[0].pageX,l.y=n.touches[0].pageY-s.startEvent.touches[0].pageY):/^click|mousedown|mousemove$/.test(n.type)&&(l.x=n.pageX-s.startEvent.pageX,l.y=n.pageY-s.startEvent.pageY),l.scale=e(s),i=s.startPosition.x+(l.x*Math.cos(o)+l.y*Math.sin(o))/Math.pow(l.scale.x*u,1),r=s.startPosition.y+(l.y*Math.cos(o)+l.x*Math.sin(-o))/Math.pow(l.scale.y*u,1),"function"==typeof t){var c=t(i,r);"object"==typeof c?("boolean"!=typeof c.x||c.x?(i="number"==typeof c.x?c.x:i,s.x(i)):i=s.x(),"boolean"!=typeof c.y||c.y?(r="number"==typeof c.y?c.y:r,s.y(r)):r=s.y()):"boolean"==typeof c&&c?s.move(i,r):(i=s.x(),r=s.y())}else"object"==typeof t&&(null!==t.minX&&i<t.minX?i=t.minX:null!==t.maxX&&i>t.maxX-a&&(i=t.maxX-a),null!==t.minY&&r<t.minY?r=t.minY:null!==t.maxY&&r>t.maxY-h&&(r=t.maxY-h),s.move(i,r));l.movedX=i-s.startPosition.x,l.movedY=r-s.startPosition.y,s.node.dispatchEvent(new CustomEvent("dragmove",{detail:{delta:l,event:n}}))}},r=function(t){t=t||window.event;t.pageX,s.startEvent.pageX,t.pageY,s.startEvent.pageY,s.startPosition.zoom;s.startEvent=null,s.startPosition=null,SVG.off(window,"mousemove",i),SVG.off(window,"touchmove",i),SVG.off(window,"mouseup",r),SVG.off(window,"touchend",r),s.node.dispatchEvent(new CustomEvent("dragend",{detail:{delta:{x:0,y:0},event:t}}))},s.on("mousedown",n),s.on("touchstart",n),s.fixed=function(){return s.off("mousedown",n),s.off("touchstart",n),SVG.off(window,"mousemove",i),SVG.off(window,"touchmove",i),SVG.off(window,"mouseup",r),SVG.off(window,"touchend",r),n=i=r=null,s},this}})}).call(this)},function(t,e,n){var i;!function(r,s){void 0!==(i=function(){return s(r,r.document)}.call(e,n,e,t))&&(t.exports=i)}("undefined"!=typeof window?window:this,function(t,e){function n(t,e,n,i){return n+i.replace(g.regex.dots," .")}function i(t){for(var e=t.slice(0),n=e.length;n--;)Array.isArray(e[n])&&(e[n]=i(e[n]));return e}function r(t,e){return t instanceof e}function s(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}function o(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function a(t){return t.charAt(0).toUpperCase()+t.slice(1)}function h(t){return 4==t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t}function u(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function l(t,e,n){if(null==e||null==n){var i=t.bbox();null==e?e=i.width/i.height*n:null==n&&(n=i.height/i.width*e)}return{width:e,height:n}}function c(t,e,n){return{x:e*t.a+n*t.c+0,y:e*t.b+n*t.d+0}}function f(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function d(t){return t instanceof g.Matrix||(t=new g.Matrix(t)),t}function p(t,e){t.cx=null==t.cx?e.bbox().cx:t.cx,t.cy=null==t.cy?e.bbox().cy:t.cy}function m(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e][0],null!=t[e][1]&&(i+=t[e][1],null!=t[e][2]&&(i+=" ",i+=t[e][2],null!=t[e][3]&&(i+=" ",i+=t[e][3],i+=" ",i+=t[e][4],null!=t[e][5]&&(i+=" ",i+=t[e][5],i+=" ",i+=t[e][6],null!=t[e][7]&&(i+=" ",i+=t[e][7])))));return i+" "}function y(e){for(var n=e.childNodes.length-1;n>=0;n--)e.childNodes[n]instanceof t.SVGElement&&y(e.childNodes[n]);return g.adopt(e).id(g.eid(e.nodeName))}function x(t){return null==t.x&&(t.x=0,t.y=0,t.width=0,t.height=0),t.w=t.width,t.h=t.height,t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}function v(t){var e=t.toString().match(g.regex.reference);if(e)return e[1]}var g=this.SVG=function(t){if(g.supported)return t=new g.Doc(t),g.parser.draw||g.prepare(),t};if(g.ns="http://www.w3.org/2000/svg",g.xmlns="http://www.w3.org/2000/xmlns/",g.xlink="http://www.w3.org/1999/xlink",g.svgjs="http://svgjs.com/svgjs",g.supported=function(){return!!e.createElementNS&&!!e.createElementNS(g.ns,"svg").createSVGRect}(),!g.supported)return!1;g.did=1e3,g.eid=function(t){return"Svgjs"+a(t)+g.did++},g.create=function(t){var n=e.createElementNS(this.ns,t);return n.setAttribute("id",this.eid(t)),n},g.extend=function(){var t,e,n,i;for(t=[].slice.call(arguments),e=t.pop(),i=t.length-1;i>=0;i--)if(t[i])for(n in e)t[i].prototype[n]=e[n];g.Set&&g.Set.inherit&&g.Set.inherit()},g.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,g.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&g.extend(e,t.extend),t.construct&&g.extend(t.parent||g.Container,t.construct),e},g.adopt=function(e){if(!e)return null;if(e.instance)return e.instance;var n;return n="svg"==e.nodeName?e.parentNode instanceof t.SVGElement?new g.Nested:new g.Doc:"linearGradient"==e.nodeName?new g.Gradient("linear"):"radialGradient"==e.nodeName?new g.Gradient("radial"):g[a(e.nodeName)]?new(g[a(e.nodeName)]):new g.Element(e),n.type=e.nodeName,n.node=e,e.instance=n,n instanceof g.Doc&&n.namespace().defs(),n.setData(JSON.parse(e.getAttribute("svgjs:data"))||{}),n},g.prepare=function(){var t=e.getElementsByTagName("body")[0],n=(t?new g.Doc(t):g.adopt(e.documentElement).nested()).size(2,0);g.parser={body:t||e.documentElement,draw:n.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:n.polyline().node,path:n.path().node,native:g.create("svg")}},g.parser={native:g.create("svg")},e.addEventListener("DOMContentLoaded",function(){g.parser.draw||g.prepare()},!1),g.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},g.utils={map:function(t,e){var n,i=t.length,r=[];for(n=0;n<i;n++)r.push(e(t[n]));return r},filter:function(t,e){var n,i=t.length,r=[];for(n=0;n<i;n++)e(t[n])&&r.push(t[n]);return r},radians:function(t){return t%360*Math.PI/180},degrees:function(t){return 180*t/Math.PI%360},filterSVGElements:function(e){return this.filter(e,function(e){return e instanceof t.SVGElement})}},g.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},g.Color=function(t){var e;this.r=0,this.g=0,this.b=0,t&&("string"==typeof t?g.regex.isRgb.test(t)?(e=g.regex.rgb.exec(t.replace(g.regex.whitespace,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):g.regex.isHex.test(t)&&(e=g.regex.hex.exec(h(t)),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"==typeof t&&(this.r=t.r,this.g=t.g,this.b=t.b))},g.extend(g.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+u(this.r)+u(this.g)+u(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new g.Color(t),this},at:function(t){return this.destination?(t=t<0?0:t>1?1:t,new g.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),g.Color.test=function(t){return t+="",g.regex.isHex.test(t)||g.regex.isRgb.test(t)},g.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},g.Color.isColor=function(t){return g.Color.isRgb(t)||g.Color.test(t)},g.Array=function(t,e){t=(t||[]).valueOf(),0==t.length&&e&&(t=e.valueOf()),this.value=this.parse(t)},g.extend(g.Array,{morph:function(t){if(this.destination=this.parse(t),this.value.length!=this.destination.length){for(var e=this.value[this.value.length-1],n=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(n);for(;this.value.length<this.destination.length;)this.value.push(e)}return this},settle:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)-1==n.indexOf(this.value[t])&&n.push(this.value[t]);return this.value=n},at:function(t){if(!this.destination)return this;for(var e=0,n=this.value.length,i=[];e<n;e++)i.push(this.value[e]+(this.destination[e]-this.value[e])*t);return new g.Array(i)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)},split:function(t){return t.trim().split(g.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var t=new this.constructor;return t.value=i(this.value),t}}),g.PointArray=function(t,e){g.Array.call(this,t,e||[[0,0]])},g.PointArray.prototype=new g.Array,g.PointArray.prototype.constructor=g.PointArray,g.extend(g.PointArray,{toString:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)n.push(this.value[t].join(","));return n.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(t){if(!this.destination)return this;for(var e=0,n=this.value.length,i=[];e<n;e++)i.push([this.value[e][0]+(this.destination[e][0]-this.value[e][0])*t,this.value[e][1]+(this.destination[e][1]-this.value[e][1])*t]);return new g.PointArray(i)},parse:function(t){var e=[];if(t=t.valueOf(),Array.isArray(t)){if(Array.isArray(t[0]))return t}else t=t.trim().split(g.regex.delimiter).map(parseFloat);t.length%2!=0&&t.pop();for(var n=0,i=t.length;n<i;n+=2)e.push([t[n],t[n+1]]);return e},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var i=this.value.length-1;i>=0;i--)this.value[i]=[this.value[i][0]+t,this.value[i][1]+e];return this},size:function(t,e){var n,i=this.bbox();for(n=this.value.length-1;n>=0;n--)i.width&&(this.value[n][0]=(this.value[n][0]-i.x)*t/i.width+i.x),i.height&&(this.value[n][1]=(this.value[n][1]-i.y)*e/i.height+i.y);return this},bbox:function(){return g.parser.poly.setAttribute("points",this.toString()),g.parser.poly.getBBox()}});for(var w={M:function(t,e,n){return e.x=n.x=t[0],e.y=n.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,n){return e.x=n.x,e.y=n.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},b="mlhvqtcsaz".split(""),_=0,k=b.length;_<k;++_)w[b[_]]=function(t){return function(e,n,i){if("H"==t)e[0]=e[0]+n.x;else if("V"==t)e[0]=e[0]+n.y;else if("A"==t)e[5]=e[5]+n.x,e[6]=e[6]+n.y;else for(var r=0,s=e.length;r<s;++r)e[r]=e[r]+(r%2?n.y:n.x);return w[t](e,n,i)}}(b[_].toUpperCase());g.PathArray=function(t,e){g.Array.call(this,t,e||[["M",0,0]])},g.PathArray.prototype=new g.Array,g.PathArray.prototype.constructor=g.PathArray,g.extend(g.PathArray,{toString:function(){return m(this.value)},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var i,r=this.value.length-1;r>=0;r--)i=this.value[r][0],"M"==i||"L"==i||"T"==i?(this.value[r][1]+=t,this.value[r][2]+=e):"H"==i?this.value[r][1]+=t:"V"==i?this.value[r][1]+=e:"C"==i||"S"==i||"Q"==i?(this.value[r][1]+=t,this.value[r][2]+=e,this.value[r][3]+=t,this.value[r][4]+=e,"C"==i&&(this.value[r][5]+=t,this.value[r][6]+=e)):"A"==i&&(this.value[r][6]+=t,this.value[r][7]+=e);return this},size:function(t,e){var n,i,r=this.bbox();for(n=this.value.length-1;n>=0;n--)i=this.value[n][0],"M"==i||"L"==i||"T"==i?(this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x,this.value[n][2]=(this.value[n][2]-r.y)*e/r.height+r.y):"H"==i?this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x:"V"==i?this.value[n][1]=(this.value[n][1]-r.y)*e/r.height+r.y:"C"==i||"S"==i||"Q"==i?(this.value[n][1]=(this.value[n][1]-r.x)*t/r.width+r.x,this.value[n][2]=(this.value[n][2]-r.y)*e/r.height+r.y,this.value[n][3]=(this.value[n][3]-r.x)*t/r.width+r.x,this.value[n][4]=(this.value[n][4]-r.y)*e/r.height+r.y,"C"==i&&(this.value[n][5]=(this.value[n][5]-r.x)*t/r.width+r.x,this.value[n][6]=(this.value[n][6]-r.y)*e/r.height+r.y)):"A"==i&&(this.value[n][1]=this.value[n][1]*t/r.width,this.value[n][2]=this.value[n][2]*e/r.height,this.value[n][6]=(this.value[n][6]-r.x)*t/r.width+r.x,this.value[n][7]=(this.value[n][7]-r.y)*e/r.height+r.y);return this},equalCommands:function(t){var e,n,i;for(t=new g.PathArray(t),i=this.value.length===t.value.length,e=0,n=this.value.length;i&&e<n;e++)i=this.value[e][0]===t.value[e][0];return i},morph:function(t){return t=new g.PathArray(t),this.equalCommands(t)?this.destination=t:this.destination=null,this},at:function(t){if(!this.destination)return this;var e,n,i,r,s=this.value,o=this.destination.value,a=[],h=new g.PathArray;for(e=0,n=s.length;e<n;e++){for(a[e]=[s[e][0]],i=1,r=s[e].length;i<r;i++)a[e][i]=s[e][i]+(o[e][i]-s[e][i])*t;"A"===a[e][0]&&(a[e][4]=+(0!=a[e][4]),a[e][5]=+(0!=a[e][5]))}return h.value=a,h},parse:function(t){if(t instanceof g.PathArray)return t.valueOf();var e,i,r={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(g.regex.numbersWithDots,n).replace(g.regex.pathLetters," $& ").replace(g.regex.hyphen,"$1 -").trim().split(g.regex.delimiter):t.reduce(function(t,e){return[].concat.call(t,e)},[]);var i=[],s=new g.Point,o=new g.Point,a=0,h=t.length;do{g.regex.isPathLetter.test(t[a])?(e=t[a],++a):"M"==e?e="L":"m"==e&&(e="l"),i.push(w[e].call(null,t.slice(a,a+=r[e.toUpperCase()]).map(parseFloat),s,o))}while(h>a);return i},bbox:function(){return g.parser.path.setAttribute("d",this.toString()),g.parser.path.getBBox()}}),g.Number=g.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-3.4e38:3.4e38:"string"==typeof t?(e=t.match(g.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof g.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new g.Number(t),new g.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new g.Number(t),new g.Number(this-t,this.unit||t.unit)},times:function(t){return t=new g.Number(t),new g.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new g.Number(t),new g.Number(this/t,this.unit||t.unit)},to:function(t){var e=new g.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new g.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new g.Number(this.destination).minus(this).times(t).plus(this):this}}}),g.Element=g.invent({create:function(t){this._stroke=g.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var n=l(this,t,e);return this.width(new g.Number(n.width)).height(new g.Number(n.height))},clone:function(t,e){this.writeDataToDom();var n=y(this.node.cloneNode(!0));return t?t.add(n):this.after(n),n},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},inside:function(t,e){var n=this.bbox();return t>n.x&&e>n.y&&t<n.x+n.width&&e<n.y+n.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(g.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter(function(e){return e!=t}).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return g.get(this.attr(t))},parent:function(e){var n=this;if(!n.node.parentNode)return null;if(n=g.adopt(n.node.parentNode),!e)return n;for(;n&&n.node instanceof t.SVGElement;){if("string"==typeof e?n.matches(e):n instanceof e)return n;if("#document"==n.node.parentNode.nodeName)return null;n=g.adopt(n.node.parentNode)}},doc:function(){return this instanceof g.Doc?this:this.parent(g.Doc)},parents:function(t){var e=[],n=this;do{if(!(n=n.parent(t))||!n.node)break;e.push(n)}while(n.parent);return e},matches:function(t){return s(this.node,t)},native:function(){return this.node},svg:function(t){var n=e.createElement("svg");if(!(t&&this instanceof g.Parent))return n.appendChild(t=e.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),n.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");n.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<(\w+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var i=0,r=n.firstChild.childNodes.length;i<r;i++)this.node.appendChild(n.firstChild.firstChild);return this},writeDataToDom:function(){if(this.each||this.lines){(this.each?this:this.lines()).each(function(){this.writeDataToDom()})}return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return r(this,t)}}}),g.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},g.morph=function(t){return function(e,n){return new g.MorphObj(e,n).at(t)}},g.Situation=g.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new g.Number(t.duration).valueOf(),this.delay=new g.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),g.FX=g.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,e,n){"object"==typeof t&&(e=t.ease,n=t.delay,t=t.duration);var i=new g.Situation({duration:t||1e3,delay:n||0,ease:g.easing[e||"-"]||e});return this.queue(i),this},delay:function(t){var e=new g.Situation({duration:t,delay:0,ease:g.easing["-"]});return this.queue(e)},target:function(t){return t&&t instanceof g.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof g.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof g.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e,n,i=this.situation;if(i.init)return this;for(t in i.animations)for(n=this.target()[t](),Array.isArray(n)||(n=[n]),Array.isArray(i.animations[t])||(i.animations[t]=[i.animations[t]]),e=n.length;e--;)i.animations[t][e]instanceof g.Number&&(n[e]=new g.Number(n[e])),i.animations[t][e]=n[e].morph(i.animations[t][e]);for(t in i.attrs)i.attrs[t]=new g.MorphObj(this.target().attr(t),i.attrs[t]);for(t in i.styles)i.styles[t]=new g.MorphObj(this.target().style(t),i.styles[t]);return i.initialTransformation=this.target().matrixify(),i.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var n=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!n&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var t=this.situation;this.stop(),this.situation=t,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return!0===this.situation.loops&&(this.situation.loops=this.situation.loop+1),"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(t,e){var n=this.situation.duration/this._speed;return this.absPos=t,e||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*n,this.situation.finish=this.situation.start+n,this.step(!0)},speed:function(t){return 0===t?this.pause():t?(this._speed=t,this.at(this.absPos,!0)):this._speed},loop:function(t,e){var n=this.last();return n.loops=null==t||t,n.loop=0,e&&(n.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(t){var e=this.last();return e.reversed=void 0===t?!e.reversed:t,this},progress:function(t){return t?this.situation.ease(this.pos):this.pos},after:function(t){var e=this.last(),n=function n(i){i.detail.situation==e&&(t.call(this,e),this.off("finished.fx",n))};return this.target().on("finished.fx",n),this._callStart()},during:function(t){var e=this.last(),n=function(n){n.detail.situation==e&&t.call(this,n.detail.pos,g.morph(n.detail.pos),n.detail.eased,e)};return this.target().off("during.fx",n).on("during.fx",n),this.after(function(){this.off("during.fx",n)}),this._callStart()},afterAll:function(t){var e=function e(n){t.call(this),this.off("allfinished.fx",e)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this._callStart()},duringAll:function(t){var e=function(e){t.call(this,e.detail.pos,g.morph(e.detail.pos),e.detail.eased,e.detail.situation)};return this.target().off("during.fx",e).on("during.fx",e),this.afterAll(function(){this.off("during.fx",e)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,n){return this.last()[n||"animations"][t]=e,this._callStart()},step:function(t){if(t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops){var e,n,i;e=Math.max(this.absPos,0),n=Math.floor(e),!0===this.situation.loops||n<this.situation.loops?(this.pos=e-n,i=this.situation.loop,this.situation.loop=n):(this.absPos=this.situation.loops,this.pos=1,i=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-i)%2))}else this.absPos=Math.min(this.absPos,1),this.pos=this.absPos;this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var r=this.situation.ease(this.pos);for(var s in this.situation.once)s>this.lastPos&&s<=r&&(this.situation.once[s].call(this.target(),this.pos,r),delete this.situation.once[s]);return this.active&&this.target().fire("during",{pos:this.pos,eased:r,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=r,this):this},eachAt:function(){var t,e,n,i=this,r=this.target(),s=this.situation;for(t in s.animations)n=[].concat(s.animations[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(s.ease(i.pos),i.pos):t}),r[t].apply(r,n);for(t in s.attrs)n=[t].concat(s.attrs[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(s.ease(i.pos),i.pos):t}),r.attr.apply(r,n);for(t in s.styles)n=[t].concat(s.styles[t]).map(function(t){return"string"!=typeof t&&t.at?t.at(s.ease(i.pos),i.pos):t}),r.style.apply(r,n);if(s.transforms.length){for(n=s.initialTransformation,t=0,e=s.transforms.length;t<e;t++){var o=s.transforms[t];o instanceof g.Matrix?n=o.relative?n.multiply((new g.Matrix).morph(o).at(s.ease(this.pos))):n.morph(o).at(s.ease(this.pos)):(o.relative||o.undo(n.extract()),n=n.multiply(o.at(s.ease(this.pos))))}r.matrix(n)}return this},once:function(t,e,n){var i=this.last();return n||(t=i.ease(t)),i.once[t]=e,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:g.Element,construct:{animate:function(t,e,n){return(this.fx||(this.fx=new g.FX(this))).animate(t,e,n)},delay:function(t){return(this.fx||(this.fx=new g.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(t){if(this.fx){if(null==t)return this.fx.speed();this.fx.speed(t)}return this}}}),g.MorphObj=g.invent({create:function(t,e){return g.Color.isColor(e)?new g.Color(t).morph(e):g.regex.delimiter.test(t)?new g.Array(t).morph(e):g.regex.numberAndUnit.test(e)?new g.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),g.extend(g.FX,{attr:function(t,e,n){if("object"==typeof t)for(var i in t)this.attr(i,t[i]);else this.add(t,e,"attrs");return this},style:function(t,e){if("object"==typeof t)for(var n in t)this.style(n,t[n]);else this.add(t,e,"styles");return this},x:function(t,e){if(this.target()instanceof g.G)return this.transform({x:t},e),this;var n=new g.Number(t);return n.relative=e,this.add("x",n)},y:function(t,e){if(this.target()instanceof g.G)return this.transform({y:t},e),this;var n=new g.Number(t);return n.relative=e,this.add("y",n)},cx:function(t){return this.add("cx",new g.Number(t))},cy:function(t){return this.add("cy",new g.Number(t))},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){if(this.target()instanceof g.Text)this.attr("font-size",t);else{var n;t&&e||(n=this.target().bbox()),t||(t=n.width/n.height*e),e||(e=n.height/n.width*t),this.add("width",new g.Number(t)).add("height",new g.Number(e))}return this},width:function(t){return this.add("width",new g.Number(t))},height:function(t){return this.add("height",new g.Number(t))},plot:function(t,e,n,i){return 4==arguments.length?this.plot([t,e,n,i]):this.add("plot",new(this.target().morphArray)(t))},leading:function(t){return this.target().leading?this.add("leading",new g.Number(t)):this},viewbox:function(t,e,n,i){return this.target()instanceof g.Container&&this.add("viewbox",new g.ViewBox(t,e,n,i)),this},update:function(t){if(this.target()instanceof g.Stop){if("number"==typeof t||t instanceof g.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset)}return this}}),g.Box=g.invent({create:function(t,e,n,i){if(!("object"!=typeof t||t instanceof g.Element))return g.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height);4==arguments.length&&(this.x=t,this.y=e,this.width=n,this.height=i),x(this)},extend:{merge:function(t){var e=new this.constructor;return e.x=Math.min(this.x,t.x),e.y=Math.min(this.y,t.y),e.width=Math.max(this.x+this.width,t.x+t.width)-e.x,e.height=Math.max(this.y+this.height,t.y+t.height)-e.y,x(e)},transform:function(t){var e,n=1/0,i=-1/0,r=1/0,s=-1/0;return[new g.Point(this.x,this.y),new g.Point(this.x2,this.y),new g.Point(this.x,this.y2),new g.Point(this.x2,this.y2)].forEach(function(e){e=e.transform(t),n=Math.min(n,e.x),i=Math.max(i,e.x),r=Math.min(r,e.y),s=Math.max(s,e.y)}),e=new this.constructor,e.x=n,e.width=i-n,e.y=r,e.height=s-r,x(e),e}}}),g.BBox=g.invent({create:function(t){if(g.Box.apply(this,[].slice.call(arguments)),t instanceof g.Element){var n;try{if(e.documentElement.contains){if(!e.documentElement.contains(t.node))throw new Exception("Element not in the dom")}else{for(var i=t.node;i.parentNode;)i=i.parentNode;if(i!=e)throw new Exception("Element not in the dom")}n=t.node.getBBox()}catch(e){if(t instanceof g.Shape){var r=t.clone(g.parser.draw.instance).show();n=r.node.getBBox(),r.remove()}else n={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}g.Box.call(this,n)}},inherit:g.Box,parent:g.Element,construct:{bbox:function(){return new g.BBox(this)}}}),g.BBox.prototype.constructor=g.BBox,g.extend(g.Element,{tbox:function(){return this.rbox(this.doc())}}),g.RBox=g.invent({create:function(t){g.Box.apply(this,[].slice.call(arguments)),t instanceof g.Element&&g.Box.call(this,t.node.getBoundingClientRect())},inherit:g.Box,parent:g.Element,extend:{addOffset:function(){return this.x+=t.pageXOffset,this.y+=t.pageYOffset,this}},construct:{rbox:function(t){return t?new g.RBox(this).transform(t.screenCTM().inverse()):new g.RBox(this).addOffset()}}}),g.RBox.prototype.constructor=g.RBox,g.Matrix=g.invent({create:function(t){var e,n=f([1,0,0,1,0,0]);for(t=t instanceof g.Element?t.matrixify():"string"==typeof t?f(t.split(g.regex.delimiter).map(parseFloat)):6==arguments.length?f([].slice.call(arguments)):Array.isArray(t)?f(t):"object"==typeof t?t:n,e=M.length-1;e>=0;--e)this[M[e]]=null!=t[M[e]]?t[M[e]]:n[M[e]]},extend:{extract:function(){var t=c(this,0,1),e=c(this,1,0),n=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(n*Math.PI/180)+this.f*Math.sin(n*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(n*Math.PI/180)+this.e*Math.sin(-n*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-n,skewY:180/Math.PI*Math.atan2(e.y,e.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:n,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new g.Matrix(this)}},clone:function(){return new g.Matrix(this)},morph:function(t){return this.destination=new g.Matrix(t),this},at:function(t){return this.destination?new g.Matrix({a:this.a+(this.destination.a-this.a)*t,b:this.b+(this.destination.b-this.b)*t,c:this.c+(this.destination.c-this.c)*t,d:this.d+(this.destination.d-this.d)*t,e:this.e+(this.destination.e-this.e)*t,f:this.f+(this.destination.f-this.f)*t}):this},multiply:function(t){return new g.Matrix(this.native().multiply(d(t).native()))},inverse:function(){return new g.Matrix(this.native().inverse())},translate:function(t,e){return new g.Matrix(this.native().translate(t||0,e||0))},scale:function(t,e,n,i){return 1==arguments.length?e=t:3==arguments.length&&(i=n,n=e,e=t),this.around(n,i,new g.Matrix(t,0,0,e,0,0))},rotate:function(t,e,n){return t=g.utils.radians(t),this.around(e,n,new g.Matrix(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0))},flip:function(t,e){return"x"==t?this.scale(-1,1,e,0):"y"==t?this.scale(1,-1,0,e):this.scale(-1,-1,t,null!=e?e:t)},skew:function(t,e,n,i){return 1==arguments.length?e=t:3==arguments.length&&(i=n,n=e,e=t),t=g.utils.radians(t),e=g.utils.radians(e),this.around(n,i,new g.Matrix(1,Math.tan(e),Math.tan(t),1,0,0))},skewX:function(t,e,n){return this.skew(t,0,e,n)},skewY:function(t,e,n){return this.skew(0,t,e,n)},around:function(t,e,n){return this.multiply(new g.Matrix(1,0,0,1,t||0,e||0)).multiply(n).multiply(new g.Matrix(1,0,0,1,-t||0,-e||0))},native:function(){for(var t=g.parser.native.createSVGMatrix(),e=M.length-1;e>=0;e--)t[M[e]]=this[M[e]];return t},toString:function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}},parent:g.Element,construct:{ctm:function(){return new g.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof g.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new g.Matrix(e)}return new g.Matrix(this.node.getScreenCTM())}}}),g.Point=g.invent({create:function(t,e){var n,i={x:0,y:0};n=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:i,this.x=n.x,this.y=n.y},extend:{clone:function(){return new g.Point(this)},morph:function(t,e){return this.destination=new g.Point(t,e),this},at:function(t){return this.destination?new g.Point({x:this.x+(this.destination.x-this.x)*t,y:this.y+(this.destination.y-this.y)*t}):this},native:function(){var t=g.parser.native.createSVGPoint();return t.x=this.x,t.y=this.y,t},transform:function(t){return new g.Point(this.native().matrixTransform(t.native()))}}}),g.extend(g.Element,{point:function(t,e){return new g.Point(t,e).transform(this.screenCTM().inverse())}}),g.extend(g.Element,{attr:function(t,e,n){if(null==t){for(t={},e=this.node.attributes,n=e.length-1;n>=0;n--)t[e[n].nodeName]=g.regex.isNumber.test(e[n].nodeValue)?parseFloat(e[n].nodeValue):e[n].nodeValue;return t}if("object"==typeof t)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return e=this.node.getAttribute(t),null==e?g.defaults.attrs[t]:g.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),"fill"!=t&&"stroke"!=t||(g.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof g.Image&&(e=this.doc().defs().pattern(0,0,function(){this.add(e)}))),"number"==typeof e?e=new g.Number(e):g.Color.isColor(e)?e=new g.Color(e):Array.isArray(e)&&(e=new g.Array(e)),"leading"==t?this.leading&&this.leading(e):"string"==typeof n?this.node.setAttributeNS(n,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),g.extend(g.Element,{transform:function(t,e){var n,i,r=this;if("object"!=typeof t)return n=new g.Matrix(r).extract(),"string"==typeof t?n[t]:n;if(n=new g.Matrix(r),e=!!e||!!t.relative,null!=t.a)n=e?n.multiply(new g.Matrix(t)):new g.Matrix(t);else if(null!=t.rotation)p(t,r),n=e?n.rotate(t.rotation,t.cx,t.cy):n.rotate(t.rotation-n.extract().rotation,t.cx,t.cy);else if(null!=t.scale||null!=t.scaleX||null!=t.scaleY){if(p(t,r),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,!e){var s=n.extract();t.scaleX=1*t.scaleX/s.scaleX,t.scaleY=1*t.scaleY/s.scaleY}n=n.scale(t.scaleX,t.scaleY,t.cx,t.cy)}else if(null!=t.skew||null!=t.skewX||null!=t.skewY){if(p(t,r),t.skewX=null!=t.skew?t.skew:null!=t.skewX?t.skewX:0,t.skewY=null!=t.skew?t.skew:null!=t.skewY?t.skewY:0,!e){var s=n.extract();n=n.multiply((new g.Matrix).skew(s.skewX,s.skewY,t.cx,t.cy).inverse())}n=n.skew(t.skewX,t.skewY,t.cx,t.cy)}else t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?r.bbox()["c"+t.flip]:t.offset:null==t.offset?(i=r.bbox(),t.flip=i.cx,t.offset=i.cy):t.flip=t.offset,n=(new g.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(e?n=n.translate(t.x,t.y):(null!=t.x&&(n.e=t.x),null!=t.y&&(n.f=t.y)));return this.attr("transform",n)}}),g.extend(g.FX,{transform:function(t,e){var n,i,r=this.target();return"object"!=typeof t?(n=new g.Matrix(r).extract(),"string"==typeof t?n[t]:n):(e=!!e||!!t.relative,null!=t.a?n=new g.Matrix(t):null!=t.rotation?(p(t,r),n=new g.Rotate(t.rotation,t.cx,t.cy)):null!=t.scale||null!=t.scaleX||null!=t.scaleY?(p(t,r),t.scaleX=null!=t.scale?t.scale:null!=t.scaleX?t.scaleX:1,t.scaleY=null!=t.scale?t.scale:null!=t.scaleY?t.scaleY:1,n=new g.Scale(t.scaleX,t.scaleY,t.cx,t.cy)):null!=t.skewX||null!=t.skewY?(p(t,r),t.skewX=null!=t.skewX?t.skewX:0,t.skewY=null!=t.skewY?t.skewY:0,n=new g.Skew(t.skewX,t.skewY,t.cx,t.cy)):t.flip?("x"==t.flip||"y"==t.flip?t.offset=null==t.offset?r.bbox()["c"+t.flip]:t.offset:null==t.offset?(i=r.bbox(),t.flip=i.cx,t.offset=i.cy):t.flip=t.offset,n=(new g.Matrix).flip(t.flip,t.offset)):null==t.x&&null==t.y||(n=new g.Translate(t.x,t.y)),n?(n.relative=e,this.last().transforms.push(n),this._callStart()):this)}}),g.extend(g.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(g.regex.transforms).slice(0,-1).map(function(t){var e=t.trim().split("(");return[e[0],e[1].split(g.regex.delimiter).map(function(t){return parseFloat(t)})]}).reduce(function(t,e){return"matrix"==e[0]?t.multiply(f(e[1])):t[e[0]].apply(t,e[1])},new g.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),n=t.screenCTM().inverse();return this.addTo(t).untransform().transform(n.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),g.Transformation=g.invent({create:function(t,e){if(arguments.length>1&&"boolean"!=typeof e)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var n=0,i=this.arguments.length;n<i;++n)this[this.arguments[n]]=t[n];else if("object"==typeof t)for(var n=0,i=this.arguments.length;n<i;++n)this[this.arguments[n]]=t[this.arguments[n]];this.inversed=!1,!0===e&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(t){for(var e=[],n=0,i=this.arguments.length;n<i;++n)e.push(this[this.arguments[n]]);var r=this._undo||new g.Matrix;return r=(new g.Matrix).morph(g.Matrix.prototype[this.method].apply(r,e)).at(t),this.inversed?r.inverse():r},undo:function(t){for(var e=0,n=this.arguments.length;e<n;++e)t[this.arguments[e]]=void 0===this[this.arguments[e]]?0:t[this.arguments[e]];return t.cx=this.cx,t.cy=this.cy,this._undo=new(g[a(this.method)])(t,!0).at(1),this}}}),g.Translate=g.invent({parent:g.Matrix,inherit:g.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),g.Rotate=g.invent({parent:g.Matrix,inherit:g.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(t){var e=(new g.Matrix).rotate((new g.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(t),this.cx,this.cy);return this.inversed?e.inverse():e},undo:function(t){return this._undo=t,this}}}),g.Scale=g.invent({parent:g.Matrix,inherit:g.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),g.Skew=g.invent({parent:g.Matrix,inherit:g.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),g.extend(g.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof t)for(e in t)this.style(e,t[e]);else{if(!g.regex.isCss.test(t))return this.node.style[o(t)];for(t=t.split(/\s*;\s*/).filter(function(t){return!!t}).map(function(t){return t.split(/\s*:\s*/)});e=t.pop();)this.style(e[0],e[1])}else this.node.style[o(t)]=null===e||g.regex.isBlank.test(e)?"":e;return this}}),g.Parent=g.invent({create:function(t){this.constructor.call(this,t)},inherit:g.Element,extend:{children:function(){return g.utils.map(g.utils.filterSVGElements(this.node.childNodes),function(t){return g.adopt(t)})},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return g.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){var n,i,r=this.children();for(n=0,i=r.length;n<i;n++)r[n]instanceof g.Element&&t.apply(r[n],[n,r]),e&&r[n]instanceof g.Container&&r[n].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),g.extend(g.Parent,{ungroup:function(t,e){return 0===e||this instanceof g.Defs||this.node==g.parser.draw?this:(t=t||(this instanceof g.Doc?this:this.parent(g.Parent)),e=e||1/0,this.each(function(){return this instanceof g.Defs?this:this instanceof g.Parent?this.ungroup(t,e-1):this.toParent(t)}),this.node.firstChild||this.remove(),this)},flatten:function(t,e){return this.ungroup(t,e)}}),g.Container=g.invent({create:function(t){this.constructor.call(this,t)},inherit:g.Parent}),g.ViewBox=g.invent({create:function(t){var e,n,i,r,s,o,a,h=[0,0,0,0],u=1,l=1,c=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(t instanceof g.Element){for(o=t,a=t,s=(t.attr("viewBox")||"").match(c),t.bbox,i=new g.Number(t.width()),r=new g.Number(t.height());"%"==i.unit;)u*=i.value,i=new g.Number(o instanceof g.Doc?o.parent().offsetWidth:o.parent().width()),o=o.parent();for(;"%"==r.unit;)l*=r.value,r=new g.Number(a instanceof g.Doc?a.parent().offsetHeight:a.parent().height()),a=a.parent();this.x=0,this.y=0,this.width=i*u,this.height=r*l,this.zoom=1,s&&(e=parseFloat(s[0]),n=parseFloat(s[1]),i=parseFloat(s[2]),r=parseFloat(s[3]),this.zoom=this.width/this.height>i/r?this.height/r:this.width/i,this.x=e,this.y=n,this.width=i,this.height=r)}else t="string"==typeof t?t.match(c).map(function(t){return parseFloat(t)}):Array.isArray(t)?t:"object"==typeof t?[t.x,t.y,t.width,t.height]:4==arguments.length?[].slice.call(arguments):h,this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(t,e,n,i){return this.destination=new g.ViewBox(t,e,n,i),this},at:function(t){return this.destination?new g.ViewBox([this.x+(this.destination.x-this.x)*t,this.y+(this.destination.y-this.y)*t,this.width+(this.destination.width-this.width)*t,this.height+(this.destination.height-this.height)*t]):this}},parent:g.Container,construct:{viewbox:function(t,e,n,i){return 0==arguments.length?new g.ViewBox(this):this.attr("viewBox",new g.ViewBox(t,e,n,i))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(t){g.Element.prototype[t]=function(e){return g.on(this.node,t,e),this}}),g.listeners=[],g.handlerMap=[],g.listenerId=0,g.on=function(t,e,n,i,r){var s=n.bind(i||t.instance||t),o=(g.handlerMap.indexOf(t)+1||g.handlerMap.push(t))-1,a=e.split(".")[0],h=e.split(".")[1]||"*";g.listeners[o]=g.listeners[o]||{},g.listeners[o][a]=g.listeners[o][a]||{},g.listeners[o][a][h]=g.listeners[o][a][h]||{},n._svgjsListenerId||(n._svgjsListenerId=++g.listenerId),g.listeners[o][a][h][n._svgjsListenerId]=s,t.addEventListener(a,s,r||!1)},g.off=function(t,e,n){var i=g.handlerMap.indexOf(t),r=e&&e.split(".")[0],s=e&&e.split(".")[1],o="";if(-1!=i)if(n){if("function"==typeof n&&(n=n._svgjsListenerId),!n)return;g.listeners[i][r]&&g.listeners[i][r][s||"*"]&&(t.removeEventListener(r,g.listeners[i][r][s||"*"][n],!1),delete g.listeners[i][r][s||"*"][n])}else if(s&&r){if(g.listeners[i][r]&&g.listeners[i][r][s]){for(n in g.listeners[i][r][s])g.off(t,[r,s].join("."),n);delete g.listeners[i][r][s]}}else if(s)for(e in g.listeners[i])for(o in g.listeners[i][e])s===o&&g.off(t,[e,s].join("."));else if(r){if(g.listeners[i][r]){for(o in g.listeners[i][r])g.off(t,[r,o].join("."));delete g.listeners[i][r]}}else{for(e in g.listeners[i])g.off(t,e);delete g.listeners[i],delete g.handlerMap[i]}},g.extend(g.Element,{on:function(t,e,n,i){return g.on(this.node,t,e,n,i),this},off:function(t,e){return g.off(this.node,t,e),this},fire:function(e,n){return e instanceof t.Event?this.node.dispatchEvent(e):this.node.dispatchEvent(e=new t.CustomEvent(e,{detail:n,cancelable:!0})),this._event=e,this},event:function(){return this._event}}),g.Defs=g.invent({create:"defs",inherit:g.Container}),g.G=g.invent({create:"g",inherit:g.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)},y:function(t){return null==t?this.transform("y"):this.transform({y:t-this.y()},!0)},cx:function(t){return null==t?this.gbox().cx:this.x(t-this.gbox().width/2)},cy:function(t){return null==t?this.gbox().cy:this.y(t-this.gbox().height/2)},gbox:function(){var t=this.bbox(),e=this.transform();return t.x+=e.x,t.x2+=e.x,t.cx+=e.x,t.y+=e.y,t.y2+=e.y,t.cy+=e.y,t}},construct:{group:function(){return this.put(new g.G)}}}),g.extend(g.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),e instanceof g.Doc&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return t>0&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),t instanceof g.Doc&&t.node.appendChild(t.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(t){t.remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){t.remove();var e=this.position();return this.parent().add(t,e+1),this}}),g.Mask=g.invent({create:function(){this.constructor.call(this,g.create("mask")),this.targets=[]},inherit:g.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unmask();return this.targets=[],this.parent().removeElement(this),this}},construct:{mask:function(){return this.defs().put(new g.Mask)}}}),g.extend(g.Element,{maskWith:function(t){return this.masker=t instanceof g.Mask?t:this.parent().mask().add(t),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),g.ClipPath=g.invent({create:function(){this.constructor.call(this,g.create("clipPath")),this.targets=[]},inherit:g.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new g.ClipPath)}}}),g.extend(g.Element,{clipWith:function(t){return this.clipper=t instanceof g.ClipPath?t:this.parent().clip().add(t),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),g.Gradient=g.invent({create:function(t){this.constructor.call(this,g.create(t+"Gradient")),this.type=t},inherit:g.Container,extend:{at:function(t,e,n){return this.put(new g.Stop).update(t,e,n)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,n){return"transform"==t&&(t="gradientTransform"),g.Container.prototype.attr.call(this,t,e,n)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),g.extend(g.Gradient,g.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new g.Number(t),fy:new g.Number(e)}):this.attr({x1:new g.Number(t),y1:new g.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new g.Number(t),cy:new g.Number(e)}):this.attr({x2:new g.Number(t),y2:new g.Number(e)})}}),g.extend(g.Defs,{gradient:function(t,e){return this.put(new g.Gradient(t)).update(e)}}),g.Stop=g.invent({create:"stop",inherit:g.Element,extend:{update:function(t){return("number"==typeof t||t instanceof g.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new g.Number(t.offset)),this}}}),g.Pattern=g.invent({create:"pattern",inherit:g.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,n){return"transform"==t&&(t="patternTransform"),g.Container.prototype.attr.call(this,t,e,n)}},construct:{pattern:function(t,e,n){return this.defs().pattern(t,e,n)}}}),g.extend(g.Defs,{pattern:function(t,e,n){return this.put(new g.Pattern).update(n).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),g.Doc=g.invent({create:function(t){t&&(t="string"==typeof t?e.getElementById(t):t,"svg"==t.nodeName?this.constructor.call(this,t):(this.constructor.call(this,g.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:g.Container,extend:{namespace:function(){return this.attr({xmlns:g.ns,version:"1.1"}).attr("xmlns:xlink",g.xlink,g.xmlns).attr("xmlns:svgjs",g.svgjs,g.xmlns)},defs:function(){if(!this._defs){var t;(t=this.node.getElementsByTagName("defs")[0])?this._defs=g.adopt(t):this._defs=new g.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return"#document"==this.node.parentNode.nodeName?null:this.node.parentNode},spof:function(){var t=this.node.getScreenCTM();return t&&this.style("left",-t.e%1+"px").style("top",-t.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,g.parser.draw.parentNode||this.node.appendChild(g.parser.draw),this}}}),g.Shape=g.invent({create:function(t){this.constructor.call(this,t)},inherit:g.Element}),g.Bare=g.invent({create:function(t,e){if(this.constructor.call(this,g.create(t)),e)for(var n in e.prototype)"function"==typeof e.prototype[n]&&(this[n]=e.prototype[n])},inherit:g.Element,extend:{words:function(t){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(e.createTextNode(t)),this}}}),g.extend(g.Parent,{element:function(t,e){return this.put(new g.Bare(t,e))}}),g.Symbol=g.invent({create:"symbol",inherit:g.Container,construct:{symbol:function(){return this.put(new g.Symbol)}}}),g.Use=g.invent({create:"use",inherit:g.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,g.xlink)}},construct:{use:function(t,e){return this.put(new g.Use).element(t,e)}}}),g.Rect=g.invent({create:"rect",inherit:g.Shape,construct:{rect:function(t,e){return this.put(new g.Rect).size(t,e)}}}),g.Circle=g.invent({create:"circle",inherit:g.Shape,construct:{circle:function(t){return this.put(new g.Circle).rx(new g.Number(t).divide(2)).move(0,0)}}}),g.extend(g.Circle,g.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),g.Ellipse=g.invent({create:"ellipse",inherit:g.Shape,construct:{ellipse:function(t,e){return this.put(new g.Ellipse).size(t,e).move(0,0)}}}),g.extend(g.Ellipse,g.Rect,g.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),g.extend(g.Circle,g.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new g.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new g.Number(t).divide(2))},size:function(t,e){var n=l(this,t,e);return this.rx(new g.Number(n.width).divide(2)).ry(new g.Number(n.height).divide(2))}}),g.Line=g.invent({create:"line",inherit:g.Shape,extend:{array:function(){return new g.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,n,i){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:n,y2:i}:new g.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var n=l(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}},construct:{line:function(t,e,n,i){return g.Line.prototype.plot.apply(this.put(new g.Line),null!=t?[t,e,n,i]:[0,0,0,0])}}}),g.Polyline=g.invent({create:"polyline",inherit:g.Shape,construct:{polyline:function(t){return this.put(new g.Polyline).plot(t||new g.PointArray)}}}),g.Polygon=g.invent({create:"polygon",inherit:g.Shape,construct:{polygon:function(t){return this.put(new g.Polygon).plot(t||new g.PointArray)}}}),g.extend(g.Polyline,g.Polygon,{array:function(){return this._array||(this._array=new g.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new g.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var n=l(this,t,e);return this.attr("points",this.array().size(n.width,n.height))}}),g.extend(g.Line,g.Polyline,g.Polygon,{morphArray:g.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),g.Path=g.invent({create:"path",inherit:g.Shape,extend:{morphArray:g.PathArray,array:function(){return this._array||(this._array=new g.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new g.PathArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("d",this.array().move(t,e))},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},size:function(t,e){var n=l(this,t,e);return this.attr("d",this.array().size(n.width,n.height))},width:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)},height:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},construct:{path:function(t){return this.put(new g.Path).plot(t||new g.PathArray)}}}),g.Image=g.invent({create:"image",inherit:g.Shape,extend:{load:function(e){if(!e)return this;var n=this,i=new t.Image;return g.on(i,"load",function(){var t=n.parent(g.Pattern);null!==t&&(0==n.width()&&0==n.height()&&n.size(i.width,i.height),t&&0==t.width()&&0==t.height()&&t.size(n.width(),n.height()),"function"==typeof n._loaded&&n._loaded.call(n,{width:i.width,height:i.height,ratio:i.width/i.height,url:e}))}),g.on(i,"error",function(t){"function"==typeof n._error&&n._error.call(n,t)}),this.attr("href",i.src=this.src=e,g.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,n){return this.put(new g.Image).load(t).size(e||0,n||e||0)}}}),g.Text=g.invent({create:function(){this.constructor.call(this,g.create("text")),this.dom.leading=new g.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",g.defaults.attrs["font-family"])},inherit:g.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},y:function(t){var e=this.attr("y"),n="number"==typeof e?e-this.bbox().y:0;return null==t?"number"==typeof e?e-n:e:this.attr("y","number"==typeof t?t+n:t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)},text:function(t){if(void 0===t){for(var t="",e=this.node.childNodes,n=0,i=e.length;n<i;++n)0!=n&&3!=e[n].nodeType&&1==g.adopt(e[n]).dom.newLined&&(t+="\n"),t+=e[n].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{t=t.split("\n");for(var n=0,r=t.length;n<r;n++)this.tspan(t[n]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new g.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=g.utils.map(g.utils.filterSVGElements(t.childNodes),function(t){return g.adopt(t)});return new g.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,n=0,i=this.dom.leading*new g.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?n+=i:(this.attr("dy",i+n),n=0))}),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new g.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new g.Text).text(t)},plain:function(t){return this.put(new g.Text).plain(t)}}}),g.Tspan=g.invent({create:"tspan",inherit:g.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(g.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),g.extend(g.Text,g.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(e.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,n=new g.Tspan;return!1===this._build&&this.clear(),e.appendChild(n.node),n.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),g.TextPath=g.invent({create:"textPath",inherit:g.Parent,parent:g.Text,construct:{morphArray:g.PathArray,path:function(t){for(var e=new g.TextPath,n=this.doc().defs().path(t);this.node.hasChildNodes();)e.node.appendChild(this.node.firstChild);return this.node.appendChild(e.node),e.attr("href","#"+n,g.xlink),this},array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),n=null;return e&&(n=e.plot(t)),null==t?n:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return g.adopt(this.node.firstChild)}}}),g.Nested=g.invent({create:function(){this.constructor.call(this,g.create("svg")),this.style("overflow","visible")},inherit:g.Container,construct:{nested:function(){return this.put(new g.Nested)}}}),g.A=g.invent({create:"a",inherit:g.Container,extend:{to:function(t){return this.attr("href",t,g.xlink)},show:function(t){return this.attr("show",t,g.xlink)},target:function(t){return this.attr("target",t)}},construct:{link:function(t){return this.put(new g.A).to(t)}}}),g.extend(g.Element,{linkTo:function(t){var e=new g.A;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}),g.Marker=g.invent({create:"marker",inherit:g.Container,extend:{width:function(t){return this.attr("markerWidth",t)},height:function(t){return this.attr("markerHeight",t)},ref:function(t,e){return this.attr("refX",t).attr("refY",e)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(t,e,n){return this.defs().marker(t,e,n)}}}),g.extend(g.Defs,{marker:function(t,e,n){return this.put(new g.Marker).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(n)}}),g.extend(g.Line,g.Polyline,g.Polygon,g.Path,{marker:function(t,e,n,i){var r=["marker"];return"all"!=t&&r.push(t),r=r.join("-"),t=arguments[1]instanceof g.Marker?arguments[1]:this.doc().marker(e,n,i),this.attr(r,t)}});var C={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};["fill","stroke"].forEach(function(t){var e,n={};n[t]=function(n){if(void 0===n)return this;if("string"==typeof n||g.Color.isRgb(n)||n&&"function"==typeof n.fill)this.attr(t,n);else for(e=C[t].length-1;e>=0;e--)null!=n[C[t][e]]&&this.attr(C.prefix(t,C[t][e]),n[C[t][e]]);return this},g.extend(g.Element,g.FX,n)}),g.extend(g.Element,g.FX,{rotate:function(t,e,n){return this.transform({rotation:t,cx:e,cy:n})},skew:function(t,e,n,i){return 1==arguments.length||3==arguments.length?this.transform({skew:t,cx:e,cy:n}):this.transform({skewX:t,skewY:e,cx:n,cy:i})},scale:function(t,e,n,i){return 1==arguments.length||3==arguments.length?this.transform({scale:t,cx:e,cy:n}):this.transform({scaleX:t,scaleY:e,cx:n,cy:i})},translate:function(t,e){return this.transform({x:t,y:e})},flip:function(t,e){return e="number"==typeof t?t:e,this.transform({flip:t||"both",offset:e})},matrix:function(t){return this.attr("transform",new g.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new g.Number(t).plus(this instanceof g.FX?0:this.x()),!0)},dy:function(t){return this.y(new g.Number(t).plus(this instanceof g.FX?0:this.y()),!0)},dmove:function(t,e){return this.dx(t).dy(e)}}),g.extend(g.Rect,g.Ellipse,g.Circle,g.Gradient,g.FX,{radius:function(t,e){var n=(this._target||this).type;return"radial"==n||"circle"==n?this.attr("r",new g.Number(t)):this.rx(t).ry(null==e?t:e)}}),g.extend(g.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),g.extend(g.Parent,g.Text,g.Tspan,g.FX,{font:function(t,e){if("object"==typeof t)for(e in t)this.font(e,t[e]);return"leading"==t?this.leading(e):"anchor"==t?this.attr("text-anchor",e):"size"==t||"family"==t||"weight"==t||"stretch"==t||"variant"==t||"style"==t?this.attr("font-"+t,e):this.attr(t,e)}}),g.Set=g.invent({create:function(t){Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){var t,e,n=[].slice.call(arguments);for(t=0,e=n.length;t<e;t++)this.members.push(n[t]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,n=this.members.length;e<n;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new g.RBox;var t=this.members[0].rbox(this.members[0].doc());return this.each(function(){t=t.merge(this.rbox(this.doc()))}),t}},construct:{set:function(t){return new g.Set(t)}}}),g.FX.Set=g.invent({create:function(t){this.set=t}}),g.Set.inherit=function(){var t,e=[];for(var t in g.Shape.prototype)"function"==typeof g.Shape.prototype[t]&&"function"!=typeof g.Set.prototype[t]&&e.push(t);e.forEach(function(t){g.Set.prototype[t]=function(){for(var e=0,n=this.members.length;e<n;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new g.FX.Set(this)):this}}),e=[];for(var t in g.FX.prototype)"function"==typeof g.FX.prototype[t]&&"function"!=typeof g.FX.Set.prototype[t]&&e.push(t);e.forEach(function(t){g.FX.Set.prototype[t]=function(){for(var e=0,n=this.set.members.length;e<n;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}})},g.extend(g.Element,{data:function(t,e,n){if("object"==typeof t)for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===n||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),g.extend(g.Element,{remember:function(t,e){if("object"==typeof arguments[0])for(var e in t)this.remember(e,t[e]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),g.get=function(t){var n=e.getElementById(v(t)||t);return g.adopt(n)},g.select=function(t,n){return new g.Set(g.utils.map((n||e).querySelectorAll(t),function(t){return g.adopt(t)}))},g.extend(g.Parent,{select:function(t){return g.select(t,this.node)}});var M="abcdef".split("");if("function"!=typeof t.CustomEvent){var S=function(t,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var i=e.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i};S.prototype=t.Event.prototype,t.CustomEvent=S}return function(e){for(var n=0,i=["moz","webkit"],r=0;r<i.length&&!t.requestAnimationFrame;++r)e.requestAnimationFrame=e[i[r]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[i[r]+"CancelAnimationFrame"]||e[i[r]+"CancelRequestAnimationFrame"];e.requestAnimationFrame=e.requestAnimationFrame||function(t){var i=(new Date).getTime(),r=Math.max(0,16-(i-n)),s=e.setTimeout(function(){t(i+r)},r);return n=i+r,s},e.cancelAnimationFrame=e.cancelAnimationFrame||e.clearTimeout}(t),g})}]);